(function(){"use strict";var n=jQuery.fn.attr,t="http://www.w3.org/2000/svg";jQuery.fn.attr=function(i,r){var e,u,l=this.length,f,o,s,h,c;if(!l)return n.apply(this,arguments);for(e=0;e<l;++e)if(f=this[e],f.namespaceURI===t){if(r!==undefined)f.setAttribute(i,r);else if($.isArray(i)){for(o=i.length,s={};o--;)h=i[o],u=f.getAttribute(h),(u||u==="0")&&(u=isNaN(u)?u:+u),s[h]=u;return s}if(typeof i=="object")for(c in i)f.setAttribute(c,i[c]);else return u=f.getAttribute(i),(u||u==="0")&&(u=isNaN(u)?u:+u),u}else return n.apply(this,arguments);return this}})();
jQuery&&function(){var e=$(window),n=$(document);$.extend($.fn,{contextMenu:function(t,i){return void 0!=t.menu&&(void 0==t.inSpeed&&(t.inSpeed=150),void 0==t.outSpeed&&(t.outSpeed=75),0==t.inSpeed&&(t.inSpeed=-1),0==t.outSpeed&&(t.outSpeed=-1),$(this).each(function(){var s=$(this),d=$(s).offset(),o=$("#"+t.menu);o.addClass("contextMenu"),$(this).bind("mousedown",function(r){var u=r;$(this).mouseup(function(r){var a=$(this);if(a.unbind("mouseup"),2===u.button||t.allowLeft||u.ctrlKey&&svgedit.browser.isMac()){if(r.stopPropagation(),$(".contextMenu").hide(),s.hasClass("disabled"))return!1;var h=r.pageX,c=r.pageY,l=e.width()-o.width(),f=e.height()-o.height();h>l-15&&(h=l-15),c>f-30&&(c=f-30),n.unbind("click"),o.css({top:c,left:h}).fadeIn(t.inSpeed),o.find("A").mouseover(function(){o.find("LI.hover").removeClass("hover"),$(this).parent().addClass("hover")}).mouseout(function(){o.find("LI.hover").removeClass("hover")}),n.keypress(function(e){switch(e.keyCode){case 38:o.find("LI.hover").length?(o.find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover"),o.find("LI.hover").length||o.find("LI:last").addClass("hover")):o.find("LI:last").addClass("hover");break;case 40:0==o.find("LI.hover").length?o.find("LI:first").addClass("hover"):(o.find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover"),o.find("LI.hover").length||o.find("LI:first").addClass("hover"));break;case 13:o.find("LI.hover A").trigger("click");break;case 27:n.trigger("click")}}),o.find("A").unbind("mouseup"),o.find("LI:not(.disabled) A").mouseup(function(){return n.unbind("click").unbind("keypress"),$(".contextMenu").hide(),i&&i($(this).attr("id").substr(1),$(a),{x:h-d.left,y:c-d.top,docX:h,docY:c}),!1}),setTimeout(function(){n.click(function(){return n.unbind("click").unbind("keypress"),o.fadeOut(t.outSpeed),!1})},0)}})}),$.browser.mozilla?$("#"+t.menu).each(function(){$(this).css({MozUserSelect:"none"})}):$.browser.msie?$("#"+t.menu).each(function(){$(this).bind("selectstart.disableTextSelect",function(){return!1})}):$("#"+t.menu).each(function(){$(this).bind("mousedown.disableTextSelect",function(){return!1})}),$(s).add($("UL.contextMenu")).bind("contextmenu",function(){return!1})}),$(this))},disableContextMenuItems:function(e){return void 0==e?($(this).find("LI").addClass("disabled"),$(this)):($(this).each(function(){if(void 0!=e)for(var n=e.split(","),t=0;t<n.length;t++)$(this).find('A[id="'+n[t]+'"]').parent().addClass("disabled")}),$(this))},enableContextMenuItems:function(e){return void 0==e?($(this).find("LI.disabled").removeClass("disabled"),$(this)):($(this).each(function(){if(void 0!=e)for(var n=e.split(","),t=0;t<n.length;t++)$(this).find('A[id="'+n[t]+'"]').parent().removeClass("disabled")}),$(this))},disableContextMenu:function(){return $(this).each(function(){$(this).addClass("disabled")}),$(this)},enableContextMenu:function(){return $(this).each(function(){$(this).removeClass("disabled")}),$(this)},destroyContextMenu:function(){return $(this).each(function(){$(this).unbind("mousedown").unbind("mouseup")}),$(this)}})}(jQuery);
(function(a,e){Math.precision=function(a,e){return void 0===e&&(e=0),Math.round(a*Math.pow(10,e))/Math.pow(10,e)};var l=function(e,l){var t,n,r=this,i=e.find("img:first"),s=0,o=100,c=100,u=0,v=100,d=100,h=0,p=0,b=new Array,g=function(a){for(var e=0;e<b.length;e++)b[e].call(r,r,a)},f=function(l){var i=e.offset();t={l:0|i.left,t:0|i.top},clearTimeout(n),n=setTimeout(function(){m.call(r,l)},0),a(document).bind("mousemove",x).bind("mouseup",w),l.preventDefault()},x=function(a){return clearTimeout(n),n=setTimeout(function(){m.call(r,a)},0),a.stopPropagation(),a.preventDefault(),!1},w=function(e){return a(document).unbind("mouseup",w).unbind("mousemove",x),e.stopPropagation(),e.preventDefault(),!1},m=function(a){var l=a.pageX-t.l,n=a.pageY-t.t,i=e.w,o=e.h;l<0?l=0:l>i&&(l=i),n<0?n=0:n>o&&(n=o),y.call(r,"xy",{x:l/i*c+s,y:n/o*d+u})},k=function(){var a=0,l=0,t=e.w,n=e.h,r=i.w,s=i.h;setTimeout(function(){c>0&&(a=h==o?t:h/c*t|0),d>0&&(l=p==v?n:p/d*n|0),r>=t?a=(t>>1)-(r>>1):a-=r>>1,s>=n?l=(n>>1)-(s>>1):l-=s>>1,i.css({left:a+"px",top:l+"px"})},0)},y=function(a,e,l){var t=void 0!==e;if(!t)switch(void 0!==a&&null!=a||(a="xy"),a.toLowerCase()){case"x":return h;case"y":return p;case"xy":default:return{x:h,y:p}}if(null==l||l!=r){var n,i,c=!1;switch(null==a&&(a="xy"),a.toLowerCase()){case"x":n=e&&(e.x&&0|e.x||0|e)||0;break;case"y":i=e&&(e.y&&0|e.y||0|e)||0;break;case"xy":default:n=e&&e.x&&0|e.x||0,i=e&&e.y&&0|e.y||0}null!=n&&(n<s?n=s:n>o&&(n=o),h!=n&&(h=n,c=!0)),null!=i&&(i<u?i=u:i>v&&(i=v),p!=i&&(p=i,c=!0)),c&&g.call(r,l||r)}},C=function(a,e){var l=void 0!==e;if(!l)switch(void 0!==a&&null!=a||(a="all"),a.toLowerCase()){case"minx":return s;case"maxx":return o;case"rangex":return{minX:s,maxX:o,rangeX:c};case"miny":return u;case"maxy":return v;case"rangey":return{minY:u,maxY:v,rangeY:d};case"all":default:return{minX:s,maxX:o,rangeX:c,minY:u,maxY:v,rangeY:d}}var t,n,r,i;switch(null==a&&(a="all"),a.toLowerCase()){case"minx":t=e&&(e.minX&&0|e.minX||0|e)||0;break;case"maxx":n=e&&(e.maxX&&0|e.maxX||0|e)||0;break;case"rangex":t=e&&e.minX&&0|e.minX||0,n=e&&e.maxX&&0|e.maxX||0;break;case"miny":r=e&&(e.minY&&0|e.minY||0|e)||0;break;case"maxy":i=e&&(e.maxY&&0|e.maxY||0|e)||0;break;case"rangey":r=e&&e.minY&&0|e.minY||0,i=e&&e.maxY&&0|e.maxY||0;break;case"all":default:t=e&&e.minX&&0|e.minX||0,n=e&&e.maxX&&0|e.maxX||0,r=e&&e.minY&&0|e.minY||0,i=e&&e.maxY&&0|e.maxY||0}null!=t&&s!=t&&(s=t,c=o-s),null!=n&&o!=n&&(o=n,c=o-s),null!=r&&u!=r&&(u=r,d=v-u),null!=i&&v!=i&&(v=i,d=v-u)},M=function(e){a.isFunction(e)&&b.push(e)},T=function(e){if(a.isFunction(e))for(var l;(l=a.inArray(e,b))!=-1;)b.splice(l,1)},Y=function(){a(document).unbind("mouseup",w).unbind("mousemove",x),e.unbind("mousedown",f),e=null,i=null,b=null};a.extend(!0,r,{val:y,range:C,bind:M,unbind:T,destroy:Y}),i.src=l.arrow&&l.arrow.image,i.w=l.arrow&&l.arrow.width||i.width(),i.h=l.arrow&&l.arrow.height||i.height(),e.w=l.map&&l.map.width||e.width(),e.h=l.map&&l.map.height||e.height(),e.bind("mousedown",f),M.call(r,k)},t=function(e,l,t,n){var r=this,i=e.find("td.Text input"),s=i.eq(3),o=i.eq(4),c=i.eq(5),u=i.length>7?i.eq(6):null,v=i.eq(0),d=i.eq(1),h=i.eq(2),p=i.eq(i.length>7?7:6),b=i.length>7?i.eq(8):null,g=function(a){if(""!=a.target.value||a.target==p.get(0)||(null==t||a.target==t.get(0))&&null!=t){if(!w(a))return a;switch(a.target){case s.get(0):switch(a.keyCode){case 38:return s.val(m.call(r,(s.val()<<0)+1,0,255)),l.val("r",s.val(),a.target),!1;case 40:return s.val(m.call(r,(s.val()<<0)-1,0,255)),l.val("r",s.val(),a.target),!1}break;case o.get(0):switch(a.keyCode){case 38:return o.val(m.call(r,(o.val()<<0)+1,0,255)),l.val("g",o.val(),a.target),!1;case 40:return o.val(m.call(r,(o.val()<<0)-1,0,255)),l.val("g",o.val(),a.target),!1}break;case c.get(0):switch(a.keyCode){case 38:return c.val(m.call(r,(c.val()<<0)+1,0,255)),l.val("b",c.val(),a.target),!1;case 40:return c.val(m.call(r,(c.val()<<0)-1,0,255)),l.val("b",c.val(),a.target),!1}break;case u&&u.get(0):switch(a.keyCode){case 38:return u.val(m.call(r,parseFloat(u.val())+1,0,100)),l.val("a",Math.precision(255*u.val()/100,n),a.target),!1;case 40:return u.val(m.call(r,parseFloat(u.val())-1,0,100)),l.val("a",Math.precision(255*u.val()/100,n),a.target),!1}break;case v.get(0):switch(a.keyCode){case 38:return v.val(m.call(r,(v.val()<<0)+1,0,360)),l.val("h",v.val(),a.target),!1;case 40:return v.val(m.call(r,(v.val()<<0)-1,0,360)),l.val("h",v.val(),a.target),!1}break;case d.get(0):switch(a.keyCode){case 38:return d.val(m.call(r,(d.val()<<0)+1,0,100)),l.val("s",d.val(),a.target),!1;case 40:return d.val(m.call(r,(d.val()<<0)-1,0,100)),l.val("s",d.val(),a.target),!1}break;case h.get(0):switch(a.keyCode){case 38:return h.val(m.call(r,(h.val()<<0)+1,0,100)),l.val("v",h.val(),a.target),!1;case 40:return h.val(m.call(r,(h.val()<<0)-1,0,100)),l.val("v",h.val(),a.target),!1}}}},f=function(a){if(""!=a.target.value||a.target==p.get(0)||(null==t||a.target==t.get(0))&&null!=t){if(!w(a))return a;switch(a.target){case s.get(0):s.val(m.call(r,s.val(),0,255)),l.val("r",s.val(),a.target);break;case o.get(0):o.val(m.call(r,o.val(),0,255)),l.val("g",o.val(),a.target);break;case c.get(0):c.val(m.call(r,c.val(),0,255)),l.val("b",c.val(),a.target);break;case u&&u.get(0):u.val(m.call(r,u.val(),0,100)),l.val("a",Math.precision(255*u.val()/100,n),a.target);break;case v.get(0):v.val(m.call(r,v.val(),0,360)),l.val("h",v.val(),a.target);break;case d.get(0):d.val(m.call(r,d.val(),0,100)),l.val("s",d.val(),a.target);break;case h.get(0):h.val(m.call(r,h.val(),0,100)),l.val("v",h.val(),a.target);break;case p.get(0):p.val(p.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),t&&t.val(p.val()),l.val("hex",""!=p.val()?p.val():null,a.target);break;case t&&t.get(0):t.val(t.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),p.val(t.val()),l.val("hex",""!=t.val()?t.val():null,a.target);break;case b&&b.get(0):b.val(b.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,2)),l.val("a",null!=b.val()?parseInt(b.val(),16):null,a.target)}}},x=function(a){if(null!=l.val())switch(a.target){case s.get(0):s.val(l.val("r"));break;case o.get(0):o.val(l.val("g"));break;case c.get(0):c.val(l.val("b"));break;case u&&u.get(0):u.val(Math.precision(100*l.val("a")/255,n));break;case v.get(0):v.val(l.val("h"));break;case d.get(0):d.val(l.val("s"));break;case h.get(0):h.val(l.val("v"));break;case p.get(0):case t&&t.get(0):p.val(l.val("hex")),t&&t.val(l.val("hex"));break;case b&&b.get(0):b.val(l.val("ahex").substring(6))}},w=function(a){switch(a.keyCode){case 9:case 16:case 29:case 37:case 39:return!1;case"c".charCodeAt():case"v".charCodeAt():if(a.ctrlKey)return!1}return!0},m=function(a,e,l){return""==a||isNaN(a)?e:a>l?l:a<e?e:a},k=function(a,e){var l=a.val("all");e!=s.get(0)&&s.val(null!=l?l.r:""),e!=o.get(0)&&o.val(null!=l?l.g:""),e!=c.get(0)&&c.val(null!=l?l.b:""),u&&e!=u.get(0)&&u.val(null!=l?Math.precision(100*l.a/255,n):""),e!=v.get(0)&&v.val(null!=l?l.h:""),e!=d.get(0)&&d.val(null!=l?l.s:""),e!=h.get(0)&&h.val(null!=l?l.v:""),e!=p.get(0)&&(t&&e!=t.get(0)||!t)&&p.val(null!=l?l.hex:""),t&&e!=t.get(0)&&e!=p.get(0)&&t.val(null!=l?l.hex:""),b&&e!=b.get(0)&&b.val(null!=l?l.ahex.substring(6):"")},y=function(){s.add(o).add(c).add(u).add(v).add(d).add(h).add(p).add(t).add(b).unbind("keyup",f).unbind("blur",x),s.add(o).add(c).add(u).add(v).add(d).add(h).unbind("keydown",g),l.unbind(k),s=null,o=null,c=null,u=null,v=null,d=null,h=null,p=null,b=null};a.extend(!0,r,{destroy:y}),s.add(o).add(c).add(u).add(v).add(d).add(h).add(p).add(t).add(b).bind("keyup",f).bind("blur",x),s.add(o).add(c).add(u).add(v).add(d).add(h).bind("keydown",g),l.bind(k)};a.jPicker={List:[],Color:function(e){var l,t,n,r,i,o,c,u=this,v=new Array,d=function(a){for(var e=0;e<v.length;e++)v[e].call(u,u,a)},h=function(a,e,v){var p=Boolean(e);if(p&&""===e.ahex&&(e.ahex="00000000"),!p){if(void 0!==a&&null!=a&&""!=a||(a="all"),null==l)return null;switch(a.toLowerCase()){case"ahex":return s.rgbaToHex({r:l,g:t,b:n,a:r});case"hex":return h("ahex").substring(0,6);case"all":return{r:l,g:t,b:n,a:r,h:i,s:o,v:c,hex:h.call(u,"hex"),ahex:h.call(u,"ahex")};default:for(var b={},g=0;g<a.length;g++)switch(a.charAt(g)){case"r":1==a.length?b=l:b.r=l;break;case"g":1==a.length?b=t:b.g=t;break;case"b":1==a.length?b=n:b.b=n;break;case"a":1==a.length?b=r:b.a=r;break;case"h":1==a.length?b=i:b.h=i;break;case"s":1==a.length?b=o:b.s=o;break;case"v":1==a.length?b=c:b.v=c}return b=={}?h.call(u,"all"):b}}if(null==v||v!=u){var f=!1;if(null==a&&(a=""),null==e)return null!=l&&(l=null,f=!0),null!=t&&(t=null,f=!0),null!=n&&(n=null,f=!0),null!=r&&(r=null,f=!0),null!=i&&(i=null,f=!0),null!=o&&(o=null,f=!0),null!=c&&(c=null,f=!0),void(f&&d.call(u,v||u));switch(a.toLowerCase()){case"ahex":case"hex":var b=s.hexToRgba(e&&(e.ahex||e.hex)||e||"none");h.call(u,"rgba",{r:b.r,g:b.g,b:b.b,a:"ahex"==a?b.a:null!=r?r:255},v);break;default:if(e&&(null!=e.ahex||null!=e.hex))return void h.call(u,"ahex",e.ahex||e.hex||"00000000",v);var x={},w=!1,m=!1;void 0!==e.r&&!a.indexOf("r")==-1&&(a+="r"),void 0!==e.g&&!a.indexOf("g")==-1&&(a+="g"),void 0!==e.b&&!a.indexOf("b")==-1&&(a+="b"),void 0!==e.a&&!a.indexOf("a")==-1&&(a+="a"),void 0!==e.h&&!a.indexOf("h")==-1&&(a+="h"),void 0!==e.s&&!a.indexOf("s")==-1&&(a+="s"),void 0!==e.v&&!a.indexOf("v")==-1&&(a+="v");for(var g=0;g<a.length;g++)switch(a.charAt(g)){case"r":if(m)continue;w=!0,x.r=e&&e.r&&0|e.r||e&&0|e||0,x.r<0?x.r=0:x.r>255&&(x.r=255),l!=x.r&&(l=x.r,f=!0);break;case"g":if(m)continue;w=!0,x.g=e&&e.g&&0|e.g||e&&0|e||0,x.g<0?x.g=0:x.g>255&&(x.g=255),t!=x.g&&(t=x.g,f=!0);break;case"b":if(m)continue;w=!0,x.b=e&&e.b&&0|e.b||e&&0|e||0,x.b<0?x.b=0:x.b>255&&(x.b=255),n!=x.b&&(n=x.b,f=!0);break;case"a":x.a=e&&null!=e.a?0|e.a:null!=e?0|e:255,x.a<0?x.a=0:x.a>255&&(x.a=255),r!=x.a&&(r=x.a,f=!0);break;case"h":if(w)continue;m=!0,x.h=e&&e.h&&0|e.h||e&&0|e||0,x.h<0?x.h=0:x.h>360&&(x.h=360),i!=x.h&&(i=x.h,f=!0);break;case"s":if(w)continue;m=!0,x.s=e&&null!=e.s?0|e.s:null!=e?0|e:100,x.s<0?x.s=0:x.s>100&&(x.s=100),o!=x.s&&(o=x.s,f=!0);break;case"v":if(w)continue;m=!0,x.v=e&&null!=e.v?0|e.v:null!=e?0|e:100,x.v<0?x.v=0:x.v>100&&(x.v=100),c!=x.v&&(c=x.v,f=!0)}if(f){if(w){l=l||0,t=t||0,n=n||0;var b=s.rgbToHsv({r:l,g:t,b:n});i=b.h,o=b.s,c=b.v}else if(m){i=i||0,o=null!=o?o:100,c=null!=c?c:100;var b=s.hsvToRgb({h:i,s:o,v:c});l=b.r,t=b.g,n=b.b}r=null!=r?r:255,d.call(u,v||u)}}}},p=function(e){a.isFunction(e)&&v.push(e)},b=function(e){if(a.isFunction(e))for(var l;(l=a.inArray(e,v))!=-1;)v.splice(l,1)},g=function(){v=null};a.extend(!0,u,{val:h,bind:p,unbind:b,destroy:g}),e&&(null!=e.ahex?h("ahex",e):null!=e.hex?h((null!=e.a?"a":"")+"hex",null!=e.a?{ahex:e.hex+s.intToHex(e.a)}:e):null!=e.r&&null!=e.g&&null!=e.b?h("rgb"+(null!=e.a?"a":""),e):null!=e.h&&null!=e.s&&null!=e.v&&h("hsv"+(null!=e.a?"a":""),e))},ColorMethods:{hexToRgba:function(a){if(""===a||"none"===a)return{r:null,g:null,b:null,a:null};a=this.validateHex(a);var e="00",l="00",t="00",n="255";return 6==a.length&&(a+="ff"),a.length>6?(e=a.substring(0,2),l=a.substring(2,4),t=a.substring(4,6),n=a.substring(6,a.length)):(a.length>4&&(e=a.substring(4,a.length),a=a.substring(0,4)),a.length>2&&(l=a.substring(2,a.length),a=a.substring(0,2)),a.length>0&&(t=a.substring(0,a.length))),{r:this.hexToInt(e),g:this.hexToInt(l),b:this.hexToInt(t),a:this.hexToInt(n)}},validateHex:function(a){return a=a.toLowerCase().replace(/[^a-f0-9]/g,""),a.length>8&&(a=a.substring(0,8)),a},rgbaToHex:function(a){return this.intToHex(a.r)+this.intToHex(a.g)+this.intToHex(a.b)+this.intToHex(a.a)},intToHex:function(a){var e=(0|a).toString(16);return 1==e.length&&(e="0"+e),e.toLowerCase()},hexToInt:function(a){return parseInt(a,16)},rgbToHsv:function(a){var e,l=a.r/255,t=a.g/255,n=a.b/255,r={h:0,s:0,v:0},i=0,s=0;return l>=t&&l>=n?(s=l,i=t>n?n:t):t>=n&&t>=l?(s=t,i=l>n?n:l):(s=n,i=t>l?l:t),r.v=s,r.s=s?(s-i)/s:0,r.s?(e=s-i,l==s?r.h=(t-n)/e:t==s?r.h=2+(n-l)/e:r.h=4+(l-t)/e,r.h=parseInt(60*r.h),r.h<0&&(r.h+=360)):r.h=0,r.s=100*r.s|0,r.v=100*r.v|0,r},hsvToRgb:function(a){var e={r:0,g:0,b:0,a:100},l=a.h,t=a.s,n=a.v;if(0==t)0==n?e.r=e.g=e.b=0:e.r=e.g=e.b=255*n/100|0;else{360==l&&(l=0),l/=60,t/=100,n/=100;var r=0|l,i=l-r,s=n*(1-t),o=n*(1-t*i),c=n*(1-t*(1-i));switch(r){case 0:e.r=n,e.g=c,e.b=s;break;case 1:e.r=o,e.g=n,e.b=s;break;case 2:e.r=s,e.g=n,e.b=c;break;case 3:e.r=s,e.g=o,e.b=n;break;case 4:e.r=c,e.g=s,e.b=n;break;case 5:e.r=n,e.g=s,e.b=o}e.r=255*e.r|0,e.g=255*e.g|0,e.b=255*e.b|0}return e}}};var n=a.jPicker.Color,r=a.jPicker.List,s=a.jPicker.ColorMethods;a.fn.jPicker=function(e){var o=arguments;return this.each(function(){var c=this,u=a.extend(!0,{},a.fn.jPicker.defaults,e);"input"==a(c).get(0).nodeName.toLowerCase()&&(a.extend(!0,u,{window:{bindToInput:!0,expandable:!0,input:a(c)}}),""==a(c).val()?(u.color.active=new n({hex:null}),u.color.current=new n({hex:null})):s.validateHex(a(c).val())&&(u.color.active=new n({hex:a(c).val(),a:u.color.active.val("a")}),u.color.current=new n({hex:a(c).val(),a:u.color.active.val("a")}))),u.window.expandable?a(c).after('<span class="jPicker"><span class="Icon"><span class="Color">&nbsp;</span><span class="Alpha">&nbsp;</span><span class="Image" title="Click To Open Color Picker">&nbsp;</span><span class="Container">&nbsp;</span></span></span>'):u.window.liveUpdate=!1;var v=parseFloat(navigator.appVersion.split("MSIE")[1])<7&&document.body.filters,d=null,h=null,p=null,b=null,g=null,f=null,x=null,w=null,m=null,k=null,y=null,C=null,M=null,T=null,Y=null,q=null,P=null,A=null,I=null,X=null,L=null,S=null,B=null,O=null,H=null,R=null,j=null,F=null,V=function(a){var e,l,t=ma.active,n=(xa.clientPath,t.val("hex"));switch(u.color.mode=a,a){case"h":if(setTimeout(function(){U.call(c,h,"transparent"),W.call(c,b,0),Z.call(c,b,100),W.call(c,g,260),Z.call(c,g,100),U.call(c,p,"transparent"),W.call(c,x,0),Z.call(c,x,100),W.call(c,w,260),Z.call(c,w,100),W.call(c,m,260),Z.call(c,m,100),W.call(c,k,260),Z.call(c,k,100),W.call(c,C,260),Z.call(c,C,100)},0),M.range("all",{minX:0,maxX:100,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:360}),null==t.val("ahex"))break;M.val("xy",{x:t.val("s"),y:100-t.val("v")},M),T.val("y",360-t.val("h"),T);break;case"s":if(setTimeout(function(){U.call(c,h,"transparent"),W.call(c,b,-260),W.call(c,g,-520),W.call(c,x,-260),W.call(c,w,-520),W.call(c,C,260),Z.call(c,C,100)},0),M.range("all",{minX:0,maxX:360,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:100}),null==t.val("ahex"))break;M.val("xy",{x:t.val("h"),y:100-t.val("v")},M),T.val("y",100-t.val("s"),T);break;case"v":if(setTimeout(function(){U.call(c,h,"000000"),W.call(c,b,-780),W.call(c,g,260),U.call(c,p,n),W.call(c,x,-520),W.call(c,w,260),Z.call(c,w,100),W.call(c,C,260),Z.call(c,C,100)},0),M.range("all",{minX:0,maxX:360,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:100}),null==t.val("ahex"))break;M.val("xy",{x:t.val("h"),y:100-t.val("s")},M),T.val("y",100-t.val("v"),T);break;case"r":if(e=-1040,l=-780,M.range("all",{minX:0,maxX:255,minY:0,maxY:255}),T.range("rangeY",{minY:0,maxY:255}),null==t.val("ahex"))break;M.val("xy",{x:t.val("b"),y:255-t.val("g")},M),T.val("y",255-t.val("r"),T);break;case"g":if(e=-1560,l=-1820,M.range("all",{minX:0,maxX:255,minY:0,maxY:255}),T.range("rangeY",{minY:0,maxY:255}),null==t.val("ahex"))break;M.val("xy",{x:t.val("b"),y:255-t.val("r")},M),T.val("y",255-t.val("g"),T);break;case"b":if(e=-2080,l=-2860,M.range("all",{minX:0,maxX:255,minY:0,maxY:255}),T.range("rangeY",{minY:0,maxY:255}),null==t.val("ahex"))break;M.val("xy",{x:t.val("r"),y:255-t.val("g")},M),T.val("y",255-t.val("b"),T);break;case"a":if(setTimeout(function(){U.call(c,h,"transparent"),W.call(c,b,-260),W.call(c,g,-520),W.call(c,x,260),W.call(c,w,260),Z.call(c,w,100),W.call(c,C,0),Z.call(c,C,100)},0),M.range("all",{minX:0,maxX:360,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:255}),null==t.val("ahex"))break;M.val("xy",{x:t.val("h"),y:100-t.val("v")},M),T.val("y",255-t.val("a"),T);break;default:throw"Invalid Mode"}switch(a){case"h":break;case"s":case"v":case"a":setTimeout(function(){Z.call(c,b,100),Z.call(c,x,100),W.call(c,m,260),Z.call(c,m,100),W.call(c,k,260),Z.call(c,k,100)},0);break;case"r":case"g":case"b":setTimeout(function(){U.call(c,h,"transparent"),U.call(c,p,"transparent"),Z.call(c,x,100),Z.call(c,b,100),W.call(c,b,e),W.call(c,g,e-260),W.call(c,x,l-780),W.call(c,w,l-520),W.call(c,m,l),W.call(c,k,l-260),W.call(c,C,260),Z.call(c,C,100)},0)}null!=t.val("ahex")&&D.call(c,t)},D=function(a,e){(null==e||e!=T&&e!=M)&&G.call(c,a,e),setTimeout(function(){N.call(c,a),Q.call(c,a),K.call(c,a)},0)},z=function(a,e){var l=ma.active;if(e==M||null!=l.val()){var t=a.val("all");switch(u.color.mode){case"h":l.val("sv",{s:t.x,v:100-t.y},e);break;case"s":case"a":l.val("hv",{h:t.x,v:100-t.y},e);break;case"v":l.val("hs",{h:t.x,s:100-t.y},e);break;case"r":l.val("gb",{g:255-t.y,b:t.x},e);break;case"g":l.val("rb",{r:255-t.y,b:t.x},e);break;case"b":l.val("rg",{r:t.x,g:255-t.y},e)}}},E=function(a,e){var l=ma.active;if(e==T||null!=l.val())switch(u.color.mode){case"h":l.val("h",{h:360-a.val("y")},e);break;case"s":l.val("s",{s:100-a.val("y")},e);break;case"v":l.val("v",{v:100-a.val("y")},e);break;case"r":l.val("r",{r:255-a.val("y")},e);break;case"g":l.val("g",{g:255-a.val("y")},e);break;case"b":l.val("b",{b:255-a.val("y")},e);break;case"a":l.val("a",255-a.val("y"),e)}},G=function(a,e){if(e!=M)switch(u.color.mode){case"h":var l=a.val("sv");M.val("xy",{x:null!=l?l.s:100,y:100-(null!=l?l.v:100)},e);break;case"s":case"a":var t=a.val("hv");M.val("xy",{x:t&&t.h||0,y:100-(null!=t?t.v:100)},e);break;case"v":var n=a.val("hs");M.val("xy",{x:n&&n.h||0,y:100-(null!=n?n.s:100)},e);break;case"r":var r=a.val("bg");M.val("xy",{x:r&&r.b||0,y:255-(r&&r.g||0)},e);break;case"g":var i=a.val("br");M.val("xy",{x:i&&i.b||0,y:255-(i&&i.r||0)},e);break;case"b":var s=a.val("rg");M.val("xy",{x:s&&s.r||0,y:255-(s&&s.g||0)},e)}if(e!=T)switch(u.color.mode){case"h":T.val("y",360-(a.val("h")||0),e);break;case"s":var o=a.val("s");T.val("y",100-(null!=o?o:100),e);break;case"v":var c=a.val("v");T.val("y",100-(null!=c?c:100),e);break;case"r":T.val("y",255-(a.val("r")||0),e);break;case"g":T.val("y",255-(a.val("g")||0),e);break;case"b":T.val("y",255-(a.val("b")||0),e);break;case"a":var v=a.val("a");T.val("y",255-(null!=v?v:255),e)}},N=function(a){try{var e=a.val("all");X.css({backgroundColor:e&&"#"+e.hex||"transparent"}),Z.call(c,X,e&&Math.precision(100*e.a/255,4)||0)}catch(a){}},Q=function(a){switch(u.color.mode){case"h":U.call(c,h,new n({h:a.val("h")||0,s:100,v:100}).val("hex"));break;case"s":case"a":var e=a.val("s");Z.call(c,g,100-(null!=e?e:100));break;case"v":var l=a.val("v");Z.call(c,b,null!=l?l:100);break;case"r":Z.call(c,g,Math.precision((a.val("r")||0)/255*100,4));break;case"g":Z.call(c,g,Math.precision((a.val("g")||0)/255*100,4));break;case"b":Z.call(c,g,Math.precision((a.val("b")||0)/255*100))}var t=a.val("a");Z.call(c,f,Math.precision(100*(255-(t||0))/255,4))},K=function(a){switch(u.color.mode){case"h":var e=a.val("a");Z.call(c,y,Math.precision(100*(255-(e||0))/255,4));break;case"s":var l=a.val("hva"),t=new n({h:l&&l.h||0,s:100,v:null!=l?l.v:100});U.call(c,p,t.val("hex")),Z.call(c,w,100-(null!=l?l.v:100)),Z.call(c,y,Math.precision(100*(255-(l&&l.a||0))/255,4));break;case"v":var r=a.val("hsa"),i=new n({h:r&&r.h||0,s:null!=r?r.s:100,v:100});U.call(c,p,i.val("hex")),Z.call(c,y,Math.precision(100*(255-(r&&r.a||0))/255,4));break;case"r":case"g":case"b":var s=0,o=0,v=a.val("rgba");"r"==u.color.mode?(s=v&&v.b||0,o=v&&v.g||0):"g"==u.color.mode?(s=v&&v.b||0,o=v&&v.r||0):"b"==u.color.mode&&(s=v&&v.r||0,o=v&&v.g||0);var d=o>s?s:o;Z.call(c,w,s>o?Math.precision((s-o)/(255-o)*100,4):0),Z.call(c,m,o>s?Math.precision((o-s)/(255-s)*100,4):0),Z.call(c,k,Math.precision(d/255*100,4)),Z.call(c,y,Math.precision(100*(255-(v&&v.a||0))/255,4));break;case"a":var e=a.val("a");U.call(c,p,a.val("hex")||"000000"),Z.call(c,y,null!=e?0:100),Z.call(c,C,null!=e?100:0)}},U=function(a,e){a.css({backgroundColor:e&&6==e.length&&"#"+e||"transparent"})},J=function(a,e){!v||e.indexOf("AlphaBar.png")==-1&&e.indexOf("Bars.png")==-1&&e.indexOf("Maps.png")==-1?a.css({backgroundImage:"url('"+e+"')"}):(a.attr("pngSrc",e),a.css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')"}))},W=function(a,e){a.css({top:e+"px"})},Z=function(a,e){if(a.css({visibility:e>0?"visible":"hidden"}),e>0&&e<100)if(v){var l=a.attr("pngSrc");null==l||l.indexOf("AlphaBar.png")==-1&&l.indexOf("Bars.png")==-1&&l.indexOf("Maps.png")==-1?a.css({opacity:Math.precision(e/100,4)}):a.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+l+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")"})}else a.css({opacity:Math.precision(e/100,4)});else if(0==e||100==e)if(v){var l=a.attr("pngSrc");null==l||l.indexOf("AlphaBar.png")==-1&&l.indexOf("Bars.png")==-1&&l.indexOf("Maps.png")==-1?a.css({opacity:""}):a.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+l+"', sizingMethod='scale')"})}else a.css({opacity:""})},$=function(){ma.active.val("ahex",ma.current.val("ahex"))},_=function(){ma.current.val("ahex",ma.active.val("ahex"))},aa=function(e){a(this).parents("tbody:first").find('input:radio[value!="'+e.target.value+'"]').removeAttr("checked"),V.call(c,e.target.value)},ea=function(){$.call(c)},la=function(){$.call(c),u.window.expandable&&ba.call(c),a.isFunction(ha)&&ha.call(c,ma.active,B)},ta=function(){_.call(c),u.window.expandable&&ba.call(c),a.isFunction(va)&&va.call(c,ma.active,S)},na=function(){pa.call(c)},ra=function(a,e){var l=a.val("hex");L.css({backgroundColor:l&&"#"+l||"transparent"}),Z.call(c,L,Math.precision(100*(a.val("a")||0)/255,4))},ia=function(a,e){var l=a.val("hex"),t=a.val("va");H.css({backgroundColor:l&&"#"+l||"transparent"}),Z.call(c,R,Math.precision(100*(255-(t&&t.a||0))/255,4)),u.window.bindToInput&&u.window.updateInputColor&&u.window.input.css({backgroundColor:l&&"#"+l||"transparent",color:null==t||t.v>75?"#000000":"#ffffff"})},sa=function(e){u.window.element,u.window.page;q=parseInt(d.css("left")),P=parseInt(d.css("top")),A=e.pageX,I=e.pageY,a(document).bind("mousemove",oa).bind("mouseup",ca),e.preventDefault()},oa=function(e){return d.css({left:q-(A-e.pageX)+"px",top:P-(I-e.pageY)+"px"}),u.window.expandable&&!a.support.boxModel&&d.prev().css({left:d.css("left"),top:d.css("top")}),e.stopPropagation(),e.preventDefault(),!1},ca=function(e){return a(document).unbind("mousemove",oa).unbind("mouseup",ca),e.stopPropagation(),e.preventDefault(),!1},ua=function(e){return e.preventDefault(),e.stopPropagation(),ma.active.val("ahex",a(this).attr("title")||null,e.target),!1},va=a.isFunction(o[1])&&o[1]||null,da=a.isFunction(o[2])&&o[2]||null,ha=a.isFunction(o[3])&&o[3]||null,pa=function(){ma.current.val("ahex",ma.active.val("ahex"));var e=function(){if(u.window.expandable&&!a.support.boxModel){var e=d.find("table:first");d.before("<iframe/>"),d.prev().css({width:e.width(),height:d.height(),opacity:0,position:"absolute",left:d.css("left"),top:d.css("top")})}};switch(u.window.expandable&&(a(document.body).children("div.jPicker.Container").css({zIndex:10}),d.css({zIndex:20})),u.window.effects.type){case"fade":d.fadeIn(u.window.effects.speed.show,e);break;case"slide":d.slideDown(u.window.effects.speed.show,e);break;case"show":default:d.show(u.window.effects.speed.show,e)}},ba=function(){var e=function(){u.window.expandable&&d.css({zIndex:10}),u.window.expandable&&!a.support.boxModel&&d.prev().remove()};switch(u.window.effects.type){case"fade":d.fadeOut(u.window.effects.speed.hide,e);break;case"slide":d.slideUp(u.window.effects.speed.hide,e);break;case"show":default:d.hide(u.window.effects.speed.hide,e)}},ga=function(){var e=u.window,r=e.expandable?a(c).next().find(".Container:first"):null;d=a(e.expandable?"<div/>":c),d.addClass("jPicker Container"),e.expandable&&d.hide(),d.get(0).onselectstart=function(a){if("input"!==a.target.nodeName.toLowerCase())return!1};var s=ma.active.val("all");e.alphaPrecision<0?e.alphaPrecision=0:e.alphaPrecision>2&&(e.alphaPrecision=2);var o='<table class="jPicker" cellpadding="0" cellspacing="0"><tbody>'+(e.expandable?'<tr><td class="Move" colspan="5">&nbsp;</td></tr>':"")+'<tr><td rowspan="9"><h2 class="Title">'+(e.title||wa.text.title)+'</h2><div class="Map"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><img src="'+xa.clientPath+xa.colorMap.arrow.file+'" class="Arrow"/></div></td><td rowspan="9"><div class="Bar"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><span class="Map4">&nbsp;</span><span class="Map5">&nbsp;</span><span class="Map6">&nbsp;</span><img src="'+xa.clientPath+xa.colorBar.arrow.file+'" class="Arrow"/></div></td><td colspan="2" class="Preview">'+wa.text.newColor+'<div><span class="Active" title="'+wa.tooltips.colors.newColor+'">&nbsp;</span><span class="Current" title="'+wa.tooltips.colors.currentColor+'">&nbsp;</span></div>'+wa.text.currentColor+'</td><td rowspan="9" class="Button"><input type="button" class="Ok" value="'+wa.text.ok+'" title="'+wa.tooltips.buttons.ok+'"/><input type="button" class="Cancel" value="'+wa.text.cancel+'" title="'+wa.tooltips.buttons.cancel+'"/><hr/><div class="Grid">&nbsp;</div></td></tr><tr class="Hue"><td class="Radio"><label title="'+wa.tooltips.hue.radio+'"><input type="radio" value="h"'+("h"==u.color.mode?' checked="checked"':"")+'/>H:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=s?s.h:"")+'" title="'+wa.tooltips.hue.textbox+'"/>&nbsp;&deg;</td></tr><tr class="Saturation"><td class="Radio"><label title="'+wa.tooltips.saturation.radio+'"><input type="radio" value="s"'+("s"==u.color.mode?' checked="checked"':"")+'/>S:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=s?s.s:"")+'" title="'+wa.tooltips.saturation.textbox+'"/>&nbsp;%</td></tr><tr class="Value"><td class="Radio"><label title="'+wa.tooltips.value.radio+'"><input type="radio" value="v"'+("v"==u.color.mode?' checked="checked"':"")+'/>V:</label><br/><br/></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=s?s.v:"")+'" title="'+wa.tooltips.value.textbox+'"/>&nbsp;%<br/><br/></td></tr><tr class="Red"><td class="Radio"><label title="'+wa.tooltips.red.radio+'"><input type="radio" value="r"'+("r"==u.color.mode?' checked="checked"':"")+'/>R:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=s?s.r:"")+'" title="'+wa.tooltips.red.textbox+'"/></td></tr><tr class="Green"><td class="Radio"><label title="'+wa.tooltips.green.radio+'"><input type="radio" value="g"'+("g"==u.color.mode?' checked="checked"':"")+'/>G:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=s?s.g:"")+'" title="'+wa.tooltips.green.textbox+'"/></td></tr><tr class="Blue"><td class="Radio"><label title="'+wa.tooltips.blue.radio+'"><input type="radio" value="b"'+("b"==u.color.mode?' checked="checked"':"")+'/>B:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=s?s.b:"")+'" title="'+wa.tooltips.blue.textbox+'"/></td></tr><tr class="Alpha"><td class="Radio">'+(e.alphaSupport?'<label title="'+wa.tooltips.alpha.radio+'"><input type="radio" value="a"'+("a"==u.color.mode?' checked="checked"':"")+"/>A:</label>":"&nbsp;")+'</td><td class="Text">'+(e.alphaSupport?'<input type="text" maxlength="'+(3+e.alphaPrecision)+'" value="'+(null!=s?Math.precision(100*s.a/255,e.alphaPrecision):"")+'" title="'+wa.tooltips.alpha.textbox+'"/>&nbsp;%':"&nbsp;")+'</td></tr><tr class="Hex"><td colspan="2" class="Text"><label title="'+wa.tooltips.hex.textbox+'">#:<input type="text" maxlength="6" class="Hex" value="'+(null!=s?s.hex:"")+'"/></label>'+(e.alphaSupport?'<input type="text" maxlength="2" class="AHex" value="'+(null!=s?s.ahex.substring(6):"")+'" title="'+wa.tooltips.hex.alpha+'"/></td>':"&nbsp;")+"</tr></tbody></table>";e.expandable?(d.html(o),0==a(document.body).children("div.jPicker.Container").length?a(document.body).prepend(d):a(document.body).children("div.jPicker.Container:last").after(d),d.mousedown(function(){a(document.body).children("div.jPicker.Container").css({zIndex:10}),d.css({zIndex:20})}),d.css({left:"left"==e.position.x?r.offset().left-530-("center"==e.position.y?25:0)+"px":"center"==e.position.x?r.offset().left-260+"px":"right"==e.position.x?r.offset().left-10+("center"==e.position.y?25:0)+"px":"screenCenter"==e.position.x?(a(document).width()>>1)-260+"px":r.offset().left+parseInt(e.position.x)+"px",position:"absolute",top:"top"==e.position.y?r.offset().top-312+"px":"center"==e.position.y?r.offset().top-156+"px":"bottom"==e.position.y?r.offset().top+25+"px":r.offset().top+parseInt(e.position.y)+"px"})):(d=a(c),d.html(o));var v=d.find("tbody:first");h=v.find("div.Map:first"),p=v.find("div.Bar:first");var q=h.find("span"),P=p.find("span");b=q.filter(".Map1:first"),g=q.filter(".Map2:first"),f=q.filter(".Map3:first"),x=P.filter(".Map1:first"),w=P.filter(".Map2:first"),m=P.filter(".Map3:first"),k=P.filter(".Map4:first"),y=P.filter(".Map5:first"),C=P.filter(".Map6:first"),M=new l(h,{map:{width:xa.colorMap.width,height:xa.colorMap.height},arrow:{image:xa.clientPath+xa.colorMap.arrow.file,width:xa.colorMap.arrow.width,height:xa.colorMap.arrow.height}}),M.bind(z),T=new l(p,{map:{width:xa.colorBar.width,height:xa.colorBar.height},arrow:{image:xa.clientPath+xa.colorBar.arrow.file,width:xa.colorBar.arrow.width,height:xa.colorBar.arrow.height}}),T.bind(E),Y=new t(v,ma.active,e.expandable&&e.bindToInput?e.input:null,e.alphaPrecision);var A=null!=s?s.hex:null,I=v.find(".Preview"),G=v.find(".Button");if(X=I.find(".Active:first").css({backgroundColor:A&&"#"+A||"transparent"}),L=I.find(".Current:first").css({backgroundColor:A&&"#"+A||"transparent"}).bind("click",ea),Z.call(c,L,Math.precision(100*ma.current.val("a"))/255,4),S=G.find(".Ok:first").bind("click",ta),B=G.find(".Cancel:first").bind("click",la),O=G.find(".Grid:first"),setTimeout(function(){J.call(c,b,xa.clientPath+"Maps.png"),J.call(c,g,xa.clientPath+"Maps.png"),J.call(c,f,xa.clientPath+"map-opacity.png"),J.call(c,x,xa.clientPath+"Bars.png"),J.call(c,w,xa.clientPath+"Bars.png"),J.call(c,m,xa.clientPath+"Bars.png"),J.call(c,k,xa.clientPath+"Bars.png"),J.call(c,y,xa.clientPath+"bar-opacity.png"),J.call(c,C,xa.clientPath+"AlphaBar.png"),J.call(c,I.find("div:first"),xa.clientPath+"preview-opacity.png")},0),v.find("td.Radio input").bind("click",aa),ma.quickList&&ma.quickList.length>0){var N="";for(i=0;i<ma.quickList.length;i++){"string"==(typeof ma.quickList[i]).toString().toLowerCase()&&(ma.quickList[i]=new n({hex:ma.quickList[i]}));var Q=ma.quickList[i].val("a"),K=ma.quickList[i].val("ahex");!e.alphaSupport&&K&&(K=K.substring(0,6)+"ff");var U=ma.quickList[i].val("hex");K||(K="00000000"),N+='<span class="QuickColor"'+(K&&' title="#'+K+'"'||"none")+' style="background-color:'+(U&&"#"+U||"")+";"+(U?"":"background-image:url("+xa.clientPath+"NoColor.png)")+(e.alphaSupport&&Q&&Q<255?";opacity:"+Math.precision(Q/255,4)+";filter:Alpha(opacity="+Math.precision(Q/2.55,4)+")":"")+'">&nbsp;</span>'}J.call(c,O,xa.clientPath+"bar-opacity.png"),O.html(N),O.find(".QuickColor").click(ua)}V.call(c,u.color.mode),ma.active.bind(D),a.isFunction(da)&&ma.active.bind(da),ma.current.bind(ra),e.expandable?(c.icon=r.parents(".Icon:first"),H=c.icon.find(".Color:first").css({backgroundColor:A&&"#"+A||"transparent"}),R=c.icon.find(".Alpha:first"),J.call(c,R,xa.clientPath+"bar-opacity.png"),Z.call(c,R,Math.precision(100*(255-(null!=s?s.a:0))/255,4)),j=c.icon.find(".Image:first").css({backgroundImage:"url('"+xa.clientPath+xa.picker.file+"')"}).bind("click",na),e.bindToInput&&e.updateInputColor&&e.input.css({backgroundColor:A&&"#"+A||"transparent",color:null==s||s.v>75?"#000000":"#ffffff"}),F=v.find(".Move:first").bind("mousedown",sa),ma.active.bind(ia)):pa.call(c)},fa=function(){for(d.find("td.Radio input").unbind("click",aa),L.unbind("click",ea),B.unbind("click",la),S.unbind("click",ta),u.window.expandable&&(j.unbind("click",na),F.unbind("mousedown",sa),c.icon=null),
d.find(".QuickColor").unbind("click",ua),h=null,p=null,b=null,g=null,f=null,x=null,w=null,m=null,k=null,y=null,C=null,M.destroy(),M=null,T.destroy(),T=null,Y.destroy(),Y=null,X=null,L=null,S=null,B=null,O=null,va=null,ha=null,da=null,d.html(""),i=0;i<r.length;i++)r[i]==c&&r.splice(i,1)},xa=u.images,wa=u.localization,ma={active:new n("string"==(typeof u.color.active).toString().toLowerCase()?{ahex:!u.window.alphaSupport&&u.color.active?u.color.active.substring(0,6)+"ff":u.color.active}:{ahex:!u.window.alphaSupport&&u.color.active.val("ahex")?u.color.active.val("ahex").substring(0,6)+"ff":u.color.active.val("ahex")}),current:new n("string"==(typeof u.color.active).toString().toLowerCase()?{ahex:!u.window.alphaSupport&&u.color.active?u.color.active.substring(0,6)+"ff":u.color.active}:{ahex:!u.window.alphaSupport&&u.color.active.val("ahex")?u.color.active.val("ahex").substring(0,6)+"ff":u.color.active.val("ahex")}),quickList:u.color.quickList};a.extend(!0,c,{commitCallback:va,liveCallback:da,cancelCallback:ha,color:ma,show:pa,hide:ba,destroy:fa}),r.push(c),setTimeout(function(){ga.call(c)},0)})},a.fn.jPicker.defaults={window:{title:null,effects:{type:"slide",speed:{show:"slow",hide:"fast"}},position:{x:"screenCenter",y:"top"},expandable:!1,liveUpdate:!0,alphaSupport:!1,alphaPrecision:0,updateInputColor:!0},color:{mode:"h",active:new n({ahex:"#ffcc00ff"}),quickList:[new n({h:360,s:33,v:100}),new n({h:360,s:66,v:100}),new n({h:360,s:100,v:100}),new n({h:360,s:100,v:75}),new n({h:360,s:100,v:50}),new n({h:180,s:0,v:100}),new n({h:30,s:33,v:100}),new n({h:30,s:66,v:100}),new n({h:30,s:100,v:100}),new n({h:30,s:100,v:75}),new n({h:30,s:100,v:50}),new n({h:180,s:0,v:90}),new n({h:60,s:33,v:100}),new n({h:60,s:66,v:100}),new n({h:60,s:100,v:100}),new n({h:60,s:100,v:75}),new n({h:60,s:100,v:50}),new n({h:180,s:0,v:80}),new n({h:90,s:33,v:100}),new n({h:90,s:66,v:100}),new n({h:90,s:100,v:100}),new n({h:90,s:100,v:75}),new n({h:90,s:100,v:50}),new n({h:180,s:0,v:70}),new n({h:120,s:33,v:100}),new n({h:120,s:66,v:100}),new n({h:120,s:100,v:100}),new n({h:120,s:100,v:75}),new n({h:120,s:100,v:50}),new n({h:180,s:0,v:60}),new n({h:150,s:33,v:100}),new n({h:150,s:66,v:100}),new n({h:150,s:100,v:100}),new n({h:150,s:100,v:75}),new n({h:150,s:100,v:50}),new n({h:180,s:0,v:50}),new n({h:180,s:33,v:100}),new n({h:180,s:66,v:100}),new n({h:180,s:100,v:100}),new n({h:180,s:100,v:75}),new n({h:180,s:100,v:50}),new n({h:180,s:0,v:40}),new n({h:210,s:33,v:100}),new n({h:210,s:66,v:100}),new n({h:210,s:100,v:100}),new n({h:210,s:100,v:75}),new n({h:210,s:100,v:50}),new n({h:180,s:0,v:30}),new n({h:240,s:33,v:100}),new n({h:240,s:66,v:100}),new n({h:240,s:100,v:100}),new n({h:240,s:100,v:75}),new n({h:240,s:100,v:50}),new n({h:180,s:0,v:20}),new n({h:270,s:33,v:100}),new n({h:270,s:66,v:100}),new n({h:270,s:100,v:100}),new n({h:270,s:100,v:75}),new n({h:270,s:100,v:50}),new n({h:180,s:0,v:10}),new n({h:300,s:33,v:100}),new n({h:300,s:66,v:100}),new n({h:300,s:100,v:100}),new n({h:300,s:100,v:75}),new n({h:300,s:100,v:50}),new n({h:180,s:0,v:0}),new n({h:330,s:33,v:100}),new n({h:330,s:66,v:100}),new n({h:330,s:100,v:100}),new n({h:330,s:100,v:75}),new n({h:330,s:100,v:50}),new n]},images:{clientPath:"/jPicker/images/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:15,height:15}},colorBar:{width:20,height:256,arrow:{file:"rangearrows.gif",width:20,height:7}},picker:{file:"picker.gif",width:25,height:24}},localization:{text:{title:"Drag Markers To Pick A Color",newColor:"new",currentColor:"current",ok:"OK",cancel:"Cancel"},tooltips:{colors:{newColor:"New Color - Press &ldquo;OK&rdquo; To Commit",currentColor:"Click To Revert To Original Color"},buttons:{ok:"Commit To This Color Selection",cancel:"Cancel And Revert To Original Color"},hue:{radio:"Set To &ldquo;Hue&rdquo; Color Mode",textbox:"Enter A &ldquo;Hue&rdquo; Value (0-360&deg;)"},saturation:{radio:"Set To &ldquo;Saturation&rdquo; Color Mode",textbox:"Enter A &ldquo;Saturation&rdquo; Value (0-100%)"},value:{radio:"Set To &ldquo;Value&rdquo; Color Mode",textbox:"Enter A &ldquo;Value&rdquo; Value (0-100%)"},red:{radio:"Set To &ldquo;Red&rdquo; Color Mode",textbox:"Enter A &ldquo;Red&rdquo; Value (0-255)"},green:{radio:"Set To &ldquo;Green&rdquo; Color Mode",textbox:"Enter A &ldquo;Green&rdquo; Value (0-255)"},blue:{radio:"Set To &ldquo;Blue&rdquo; Color Mode",textbox:"Enter A &ldquo;Blue&rdquo; Value (0-255)"},alpha:{radio:"Set To &ldquo;Alpha&rdquo; Color Mode",textbox:"Enter A &ldquo;Alpha&rdquo; Value (0-100)"},hex:{textbox:"Enter A &ldquo;Hex&rdquo; Color Value (#000000-#ffffff)",alpha:"Enter A &ldquo;Alpha&rdquo; Value (#00-#ff)"}}}}})(jQuery,"1.1.6");
(function($,p){var i,m=Array.prototype.slice,r=decodeURIComponent,a=$.param,c,l,v,b=$.bbq=$.bbq||{},q,u,j,e=$.event.special,d="hashchange",A="querystring",D="fragment",y="elemUrlAttr",g="location",k="href",t="src",x=/^.*\?|#.*$/g,w=/^.*\#/,h,C={};function E(F){return typeof F==="string"}function B(G){var F=m.call(arguments,1);return function(){return G.apply(this,F.concat(m.call(arguments)))}}function n(F){return F.replace(/^[^#]*#?(.*)$/,"$1")}function o(F){return F.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function f(H,M,F,I,G){var O,L,K,N,J;if(I!==i){K=F.match(H?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);J=K[3]||"";if(G===2&&E(I)){L=I.replace(H?w:x,"")}else{N=l(K[2]);I=E(I)?l[H?D:A](I):I;L=G===2?I:G===1?$.extend({},I,N):$.extend({},N,I);L=a(L);if(H){L=L.replace(h,r)}}O=K[1]+(H?"#":L||!K[1]?"?":"")+L+J}else{O=M(F!==i?F:p[g][k])}return O}a[A]=B(f,0,o);a[D]=c=B(f,1,n);c.noEscape=function(G){G=G||"";var F=$.map(G.split(""),encodeURIComponent);h=new RegExp(F.join("|"),"g")};c.noEscape(",/");$.deparam=l=function(I,F){var H={},G={"true":!0,"false":!1,"null":null};$.each(I.replace(/\+/g," ").split("&"),function(L,Q){var K=Q.split("="),P=r(K[0]),J,O=H,M=0,R=P.split("]["),N=R.length-1;if(/\[/.test(R[0])&&/\]$/.test(R[N])){R[N]=R[N].replace(/\]$/,"");R=R.shift().split("[").concat(R);N=R.length-1}else{N=0}if(K.length===2){J=r(K[1]);if(F){J=J&&!isNaN(J)?+J:J==="undefined"?i:G[J]!==i?G[J]:J}if(N){for(;M<=N;M++){P=R[M]===""?O.length:R[M];O=O[P]=M<N?O[P]||(R[M+1]&&isNaN(R[M+1])?{}:[]):J}}else{if($.isArray(H[P])){H[P].push(J)}else{if(H[P]!==i){H[P]=[H[P],J]}else{H[P]=J}}}}else{if(P){H[P]=F?i:""}}});return H};function z(H,F,G){if(F===i||typeof F==="boolean"){G=F;F=a[H?D:A]()}else{F=E(F)?F.replace(H?w:x,""):F}return l(F,G)}l[A]=B(z,0);l[D]=v=B(z,1);$[y]||($[y]=function(F){return $.extend(C,F)})({a:k,base:k,iframe:t,img:t,input:t,form:"action",link:k,script:t});j=$[y];function s(I,G,H,F){if(!E(H)&&typeof H!=="object"){F=H;H=G;G=i}return this.each(function(){var L=$(this),J=G||j()[(this.nodeName||"").toLowerCase()]||"",K=J&&L.attr(J)||"";L.attr(J,a[I](K,H,F))})}$.fn[A]=B(s,A);$.fn[D]=B(s,D);b.pushState=q=function(I,F){if(E(I)&&/^#/.test(I)&&F===i){F=2}var H=I!==i,G=c(p[g][k],H?I:{},H?F:2);p[g][k]=G+(/#/.test(G)?"":"#")};b.getState=u=function(F,G){return F===i||typeof F==="boolean"?v(F):v(G)[F]};b.removeState=function(F){var G={};if(F!==i){G=u();$.each($.isArray(F)?F:arguments,function(I,H){delete G[H]})}q(G,2)};e[d]=$.extend(e[d],{add:function(F){var H;function G(J){var I=J[D]=c();J.getState=function(K,L){return K===i||typeof K==="boolean"?l(I,K):l(I,L)[K]};H.apply(this,arguments)}if($.isFunction(F)){H=F;return G}else{H=F.handler;F.handler=G}}})})(jQuery,this);
(function($,i,b){var j,k=$.event.special,c="location",d="hashchange",l="href",f=$.browser,g=document.documentMode,h=f.msie&&(g===b||g<8),e="on"+d in i&&!h;function a(m){m=m||i[c][l];return m.replace(/^[^#]*#?(.*)$/,"$1")}$[d+"Delay"]=100;k[d]=$.extend(k[d],{setup:function(){if(e){return false}$(j.start)},teardown:function(){if(e){return false}$(j.stop)}});j=(function(){var m={},r,n,o,q;function p(){o=q=function(s){return s};if(h){n=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;q=function(){return a(n.document[c][l])};o=function(u,s){if(u!==s){var t=n.document;t.open().close();t[c].hash="#"+u}};o(a())}}m.start=function(){if(r){return}var t=a();o||p();(function s(){var v=a(),u=q(t);if(v!==t){o(t=v,u);$(i).trigger(d)}else{if(u!==t){i[c][l]=i[c][l].replace(/#.*/,"")+"#"+u}}r=setTimeout(s,$[d+"Delay"])})()};m.stop=function(){if(!n){r&&clearTimeout(r);r=0}};return m})()})(jQuery,this);
(function(){function r(i,z,t){i=document.createElementNS(A.svg,i);if(Ba)for(var B in z)i.setAttribute(B,z[B]);else for(B in z){var W=z[B],w=i[B];if(w&&w.constructor==="SVGLength")w.baseVal.value=W;else i.setAttribute(B,W)}t&&t.appendChild(i);return i}var A={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};if(!window.console)window.console=new function(){this.log=function(){};this.dir=function(){}};$.jGraduate={Paint:function(i){i=i||{};this.alpha=isNaN(i.alpha)?100:i.alpha;if(i.copy){this.type=
i.copy.type;this.alpha=i.copy.alpha;this.radialGradient=this.linearGradient=this.solidColor=null;switch(this.type){case "solidColor":this.solidColor=i.copy.solidColor;break;case "linearGradient":this.linearGradient=i.copy.linearGradient.cloneNode(true);break;case "radialGradient":this.radialGradient=i.copy.radialGradient.cloneNode(true)}}else if(i.linearGradient){this.type="linearGradient";this.radialGradient=this.solidColor=null;this.linearGradient=i.linearGradient.cloneNode(true)}else if(i.radialGradient){this.type=
"radialGradient";this.linearGradient=this.solidColor=null;this.radialGradient=i.radialGradient.cloneNode(true)}else if(i.solidColor){this.type="solidColor";this.solidColor=i.solidColor}else{this.type="none";this.radialGradient=this.linearGradient=this.solidColor=null}}};jQuery.fn.jGraduateDefaults={paint:new $.jGraduate.Paint,window:{pickerTitle:"Drag markers to pick a paint"},images:{clientPath:"images/"},newstop:"inverse"};var Ba=navigator.userAgent.indexOf("Gecko/")>=0;jQuery.fn.jGraduate=function(i){var z=
arguments;return this.each(function(){function t(c,a,d,h,f){var l=f||r("stop",{"stop-color":a,"stop-opacity":d,offset:c},g);if(f){a=f.getAttribute("stop-color");d=f.getAttribute("stop-opacity");c=f.getAttribute("offset")}else g.appendChild(l);if(d===null)d=1;f=r("path",{d:"M-6.2,0.9c3.6-4,6.7-4.3,6.7-12.4c-0.2,7.9,3.1,8.8,6.5,12.4c3.5,3.8,2.9,9.6,0,12.3c-3.1,2.8-10.4,2.7-13.2,0C-9.6,9.9-9.4,4.4-6.2,0.9z",fill:"url(#jGraduate_trans)",transform:"translate("+(10+c*j)+", 26)"},fa);var X=r("path",{d:"M-6.2,0.9c3.6-4,6.7-4.3,6.7-12.4c-0.2,7.9,3.1,8.8,6.5,12.4c3.5,3.8,2.9,9.6,0,12.3c-3.1,2.8-10.4,2.7-13.2,0C-9.6,9.9-9.4,4.4-6.2,0.9z",
fill:a,"fill-opacity":d,transform:"translate("+(10+c*j)+", 26)",stroke:"#000","stroke-width":1.5},fa);$(X).mousedown(function(M){B(this);R=F;N.mousemove(la).mouseup(W);S=ga.offset();M.preventDefault();return false}).data("stop",l).data("bg",f).dblclick(function(){$("div.jGraduate_LightBox").show();for(var M=this,I=+l.getAttribute("stop-opacity")||1,C=l.getAttribute("stop-color")||1,Y=(parseFloat(I)*255).toString(16);Y.length<2;)Y="0"+Y;a=C.substr(1)+Y;$("#"+b+"_jGraduate_stopPicker").css({left:100,
bottom:15}).jPicker({window:{title:"Pick the start color and opacity for the gradient"},images:{clientPath:o.images.clientPath},color:{active:a,alphaSupport:true}},function(Z){C=Z.val("hex")?"#"+Z.val("hex"):"none";I=Z.val("a")!==null?Z.val("a")/256:1;M.setAttribute("fill",C);M.setAttribute("fill-opacity",I);l.setAttribute("stop-color",C);l.setAttribute("stop-opacity",I);$("div.jGraduate_LightBox").hide();$("#"+b+"_jGraduate_stopPicker").hide()},null,function(){$("div.jGraduate_LightBox").hide();
$("#"+b+"_jGraduate_stopPicker").hide()})});$(g).find("stop").each(function(){var M=$(this);if(+this.getAttribute("offset")>c){if(!a){var I=this.getAttribute("stop-color"),C=this.getAttribute("stop-opacity");l.setAttribute("stop-color",I);X.setAttribute("fill",I);l.setAttribute("stop-opacity",C===null?1:C);X.setAttribute("fill-opacity",C===null?1:C)}M.before(l);return false}});h&&B(X);return l}function B(c){F&&F.setAttribute("stroke","#000");c.setAttribute("stroke","blue");F=c;F.parentNode.appendChild(F)}
function W(){N.unbind("mousemove",la);if(O.getAttribute("display")!=="none"){O.setAttribute("display","none");var c=$(F),a=c.data("stop");c=c.data("bg");$([F,a,c]).remove()}R=null}function w(){var c=T?"rotate("+T+","+ha+","+ia+") ":"";J===1&&G===1?g.removeAttribute("gradientTransform"):g.setAttribute("gradientTransform",c+"translate("+-ha*(J-1)+","+-ia*(G-1)+") scale("+J+","+G+")")}function la(c){var a=c.pageX-S.left;c=c.pageY-S.top;a=a<10?10:a>j+10?j+10:a;var d="translate("+a+", 26)";if(c<-60||c>
130){O.setAttribute("display","block");O.setAttribute("transform",d)}else O.setAttribute("display","none");R.setAttribute("transform",d);$.data(R,"bg").setAttribute("transform",d);$.data(R,"stop").setAttribute("offset",(a-10)/j);var h=0;$(g).find("stop").each(function(){var f=this.getAttribute("offset"),l=$(this);if(f<h){l.prev().before(l);D=$(g).find("stop")}h=f})}var e=$(this),o=$.extend(true,{},jQuery.fn.jGraduateDefaults,i),b=e.attr("id"),s="#"+e.attr("id")+" ";if(s){var ma=function(){switch(e.paint.type){case "radialGradient":e.paint.linearGradient=
null;break;case "linearGradient":e.paint.radialGradient=null;break;case "solidColor":e.paint.radialGradient=e.paint.linearGradient=null}$.isFunction(e.okCallback)&&e.okCallback(e.paint);e.hide()},na=function(){$.isFunction(e.cancelCallback)&&e.cancelCallback();e.hide()};$.extend(true,e,{paint:new $.jGraduate.Paint({copy:o.paint}),okCallback:$.isFunction(z[1])&&z[1]||null,cancelCallback:$.isFunction(z[2])&&z[2]||null});e.position();var u=null,N=$(window);if(e.paint.type=="none")e.paint=$.jGraduate.Paint({solidColor:"ffffff"});
e.addClass("jGraduate_Picker");e.html('<ul class="jGraduate_tabs"><li class="jGraduate_tab_color jGraduate_tab_current" data-type="col">Solid Color</li><li class="jGraduate_tab_lingrad" data-type="lg">Linear Gradient</li><li class="jGraduate_tab_radgrad" data-type="rg">Radial Gradient</li></ul><div class="jGraduate_colPick"></div><div class="jGraduate_gradPick"></div><div class="jGraduate_LightBox"></div><div id="'+b+'_jGraduate_stopPicker" class="jGraduate_stopPicker"></div>');var Ca=$(s+"> .jGraduate_colPick"),
n=$(s+"> .jGraduate_gradPick");n.html('<div id="'+b+'_jGraduate_Swatch" class="jGraduate_Swatch"><h2 class="jGraduate_Title">'+o.window.pickerTitle+'</h2><div id="'+b+'_jGraduate_GradContainer" class="jGraduate_GradContainer"></div><div id="'+b+'_jGraduate_StopSlider" class="jGraduate_StopSlider"></div></div><div class="jGraduate_Form jGraduate_Points jGraduate_lg_field"><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Begin Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+
b+'_jGraduate_x1" size="3" title="Enter starting x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+b+'_jGraduate_y1" size="3" title="Enter starting y value between 0.0 and 1.0"/></div></div><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">End Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+b+'_jGraduate_x2" size="3" title="Enter ending x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+
b+'_jGraduate_y2" size="3" title="Enter ending y value between 0.0 and 1.0"/></div></div></div><div class="jGraduate_Form jGraduate_Points jGraduate_rg_field"><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Center Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+b+'_jGraduate_cx" size="3" title="Enter x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+b+'_jGraduate_cy" size="3" title="Enter y value between 0.0 and 1.0"/></div></div><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Focal Point</label><div class="jGraduate_Form_Section"><label>Match center: <input type="checkbox" checked="checked" id="'+
b+'_jGraduate_match_ctr"/></label><br/><label>x:</label><input type="text" id="'+b+'_jGraduate_fx" size="3" title="Enter x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+b+'_jGraduate_fy" size="3" title="Enter y value between 0.0 and 1.0"/></div></div></div><div class="jGraduate_StopSection jGraduate_SpreadMethod"><label class="jGraduate_Form_Heading">Spread method</label><div class="jGraduate_Form_Section"><select class="jGraduate_spreadMethod"><option value=pad selected>Pad</option><option value=reflect>Reflect</option><option value=repeat>Repeat</option></select></div></div><div class="jGraduate_Form"><div class="jGraduate_Slider jGraduate_RadiusField jGraduate_rg_field"><label class="prelabel">Radius:</label><div id="'+
b+'_jGraduate_Radius" class="jGraduate_SliderBar jGraduate_Radius" title="Click to set radius"><img id="'+b+'_jGraduate_RadiusArrows" class="jGraduate_RadiusArrows" src="'+o.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+b+'_jGraduate_RadiusInput" size="3" value="100"/>%</label></div><div class="jGraduate_Slider jGraduate_EllipField jGraduate_rg_field"><label class="prelabel">Ellip:</label><div id="'+b+'_jGraduate_Ellip" class="jGraduate_SliderBar jGraduate_Ellip" title="Click to set Ellip"><img id="'+
b+'_jGraduate_EllipArrows" class="jGraduate_EllipArrows" src="'+o.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+b+'_jGraduate_EllipInput" size="3" value="0"/>%</label></div><div class="jGraduate_Slider jGraduate_AngleField jGraduate_rg_field"><label class="prelabel">Angle:</label><div id="'+b+'_jGraduate_Angle" class="jGraduate_SliderBar jGraduate_Angle" title="Click to set Angle"><img id="'+b+'_jGraduate_AngleArrows" class="jGraduate_AngleArrows" src="'+o.images.clientPath+
'rangearrows2.gif"></div><label><input type="text" id="'+b+'_jGraduate_AngleInput" size="3" value="0"/>deg</label></div><div class="jGraduate_Slider jGraduate_OpacField"><label class="prelabel">Opac:</label><div id="'+b+'_jGraduate_Opac" class="jGraduate_SliderBar jGraduate_Opac" title="Click to set Opac"><img id="'+b+'_jGraduate_OpacArrows" class="jGraduate_OpacArrows" src="'+o.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+b+'_jGraduate_OpacInput" size="3" value="100"/>%</label></div></div><div class="jGraduate_OkCancel"><input type="button" id="'+
b+'_jGraduate_Ok" class="jGraduate_Ok" value="OK"/><input type="button" id="'+b+'_jGraduate_Cancel" class="jGraduate_Cancel" value="Cancel"/></div>');var j=256,oa=j-0,pa=j-0,p,g,aa,q={};$(".jGraduate_SliderBar").width(145);var x=$("#"+b+"_jGraduate_GradContainer")[0],m=r("svg",{id:b+"_jgraduate_svg",width:j,height:j,xmlns:A.svg},x);p=p||e.paint.type;var v=g=e.paint[p],U=e.paint.alpha,ba=p==="solidColor";switch(p){case "solidColor":case "linearGradient":if(!ba){g.id=b+"_lg_jgraduate_grad";v=g=m.appendChild(g)}r("radialGradient",
{id:b+"_rg_jgraduate_grad"},m);if(p==="linearGradient")break;case "radialGradient":if(!ba){g.id=b+"_rg_jgraduate_grad";v=g=m.appendChild(g)}r("linearGradient",{id:b+"_lg_jgraduate_grad"},m)}if(ba){v=g=$("#"+b+"_lg_jgraduate_grad")[0];u=e.paint[p];t(0,"#"+u,1);var K=typeof o.newstop;if(K==="string")switch(o.newstop){case "same":t(1,"#"+u,1);break;case "inverse":K="";for(var y=0;y<6;y+=2){u.substr(y,2);var P=(255-parseInt(u.substr(y,2),16)).toString(16);if(P.length<2)P=0+P;K+=P}t(1,"#"+K,1);break;case "white":t(1,
"#ffffff",1);break;case "black":t(1,"#000000",1)}else if(K==="object")t(1,o.newstop.color||"#"+u,"opac"in o.newstop?o.newstop.opac:1)}u=parseFloat(v.getAttribute("x1")||0);K=parseFloat(v.getAttribute("y1")||0);y=parseFloat(v.getAttribute("x2")||1);P=parseFloat(v.getAttribute("y2")||0);var ca=parseFloat(v.getAttribute("cx")||0.5),da=parseFloat(v.getAttribute("cy")||0.5),qa=parseFloat(v.getAttribute("fx")||ca),ra=parseFloat(v.getAttribute("fy")||da);aa=r("rect",{id:b+"_jgraduate_rect",x:0,y:0,width:oa,
height:pa,fill:"url(#"+b+"_jgraduate_grad)","fill-opacity":U/100},m);var sa=$("<div/>").attr({"class":"grad_coord jGraduate_lg_field",title:"Begin Stop"}).text(1).css({top:K*j,left:u*j}).data("coord","start").appendTo(x),Da=sa.clone().text(2).css({top:P*j,left:y*j}).attr("title","End stop").data("coord","end").appendTo(x),ta=$("<div/>").attr({"class":"grad_coord jGraduate_rg_field",title:"Center stop"}).text("C").css({top:da*j,left:ca*j}).data("coord","center").appendTo(x),V=ta.clone().text("F").css({top:ra*
j,left:qa*j,display:"none"}).attr("title","Focus point").data("coord","focus").appendTo(x);V[0].id=b+"_jGraduate_focusCoord";$(s+" .grad_coord");$.each(["x1","y1","x2","y2","cx","cy","fx","fy"],function(c,a){var d=g.getAttribute(a),h=isNaN(a[1]);d||(d=h?"0.5":a==="x2"?"1.0":"0.0");q[a]=$("#"+b+"_jGraduate_"+a).val(d).change(function(){if(isNaN(parseFloat(this.value))||this.value<0)this.value=0;else if(this.value>1)this.value=1;if(!(a[0]==="f"&&!E))if(h&&p==="radialGradient"||!h&&p==="linearGradient")g.setAttribute(a,
this.value);var f=h?a[0]==="c"?ta:V:a[1]==="1"?sa:Da,l=a.indexOf("x")>=0?"left":"top";f.css(l,this.value*j)}).change()});var D,fa,ga=$("#"+b+"_jGraduate_StopSlider"),F,H,R,O=r("path",{d:"m9.75,-6l-19.5,19.5m0,-19.5l19.5,19.5",fill:"none",stroke:"#D00","stroke-width":5,display:"none"},H),S,J=1,G=1,T=0,ha=ca,ia=da;H=r("svg",{width:"100%",height:45},ga[0]);x=r("pattern",{width:16,height:16,patternUnits:"userSpaceOnUse",id:"jGraduate_trans"},H);r("image",{width:16,height:16},x).setAttributeNS(A.xlink,
"xlink:href",o.images.clientPath+"map-opacity.png");$(H).click(function(c){S=ga.offset();if(c.target.tagName!=="path"){var a=c.pageX-S.left-8;a=a<10?10:a>j+10?j+10:a;t(a/j,0,0,true);c.stopPropagation()}});$(H).mouseover(function(){H.appendChild(O)});fa=r("g",{},H);r("line",{x1:10,y1:15,x2:j+10,y2:15,"stroke-width":2,stroke:"#000"},H);var ua=n.find(".jGraduate_spreadMethod").change(function(){g.setAttribute("spreadMethod",$(this).val())}),Q=null,va=function(c){var a=c.pageX-ja.left,d=c.pageY-ja.top;
a=a<0?0:a>j?j:a;d=d<0?0:d>j?j:d;Q.css("left",a).css("top",d);a=a/oa;d=d/pa;var h=Q.data("coord"),f=g;switch(h){case "start":q.x1.val(a);q.y1.val(d);f.setAttribute("x1",a);f.setAttribute("y1",d);break;case "end":q.x2.val(a);q.y2.val(d);f.setAttribute("x2",a);f.setAttribute("y2",d);break;case "center":q.cx.val(a);q.cy.val(d);f.setAttribute("cx",a);f.setAttribute("cy",d);ha=a;ia=d;w();break;case "focus":q.fx.val(a);q.fy.val(d);f.setAttribute("fx",a);f.setAttribute("fy",d);w()}c.preventDefault()},wa=
function(){Q=null;N.unbind("mousemove",va).unbind("mouseup",wa)};D=g.getElementsByTagNameNS(A.svg,"stop");if(k<2){for(;k<2;){g.appendChild(document.createElementNS(A.svg,"stop"));++k}D=g.getElementsByTagNameNS(A.svg,"stop")}var k=D.length;for(y=0;y<k;y++)t(0,0,0,0,D[y]);ua.val(g.getAttribute("spreadMethod")||"pad");var ja,E=false;aa.setAttribute("fill-opacity",U/100);$("#"+b+" div.grad_coord").mousedown(function(c){c.preventDefault();Q=$(this);Q.offset();ja=Q.parent().offset();N.mousemove(va).mouseup(wa)});
$("#"+b+"_jGraduate_Ok").bind("click",function(){e.paint.type=p;e.paint[p]=g.cloneNode(true);e.paint.solidColor=null;ma()});$("#"+b+"_jGraduate_Cancel").bind("click",function(){na()});if(p==="radialGradient")if(E)V.show();else{V.hide();q.fx.val("");q.fy.val("")}$("#"+b+"_jGraduate_match_ctr")[0].checked=!E;var xa,ya;$("#"+b+"_jGraduate_match_ctr").change(function(){E=!this.checked;V.toggle(E);q.fx.val("");q.fy.val("");var c=g;if(E){var a=xa||0.5,d=ya||0.5;c.setAttribute("fx",a);c.setAttribute("fy",
d);q.fx.val(a);q.fy.val(d)}else{xa=c.getAttribute("fx");ya=c.getAttribute("fy");c.removeAttribute("fx");c.removeAttribute("fy")}});D=g.getElementsByTagNameNS(A.svg,"stop");k=D.length;if(k<2){for(;k<2;){g.appendChild(document.createElementNS(A.svg,"stop"));++k}D=g.getElementsByTagNameNS(A.svg,"stop")}var L;U=n=0;if(p==="radialGradient"){m=g.gradientTransform.baseVal;if(m.numberOfItems===2){k=m.getItem(0);m=m.getItem(1);if(k.type===2&&m.type===3){k=m.matrix;if(k.a!==1)n=Math.round(-(1-k.a)*100);else if(k.d!==
1)n=Math.round((1-k.d)*100)}}else if(m.numberOfItems===3){x=m.getItem(0);k=m.getItem(1);m=m.getItem(2);if(x.type===4&&k.type===2&&m.type===3){U=Math.round(x.angle);k=m.matrix;if(k.a!==1)n=Math.round(-(1-k.a)*100);else if(k.d!==1)n=Math.round((1-k.d)*100)}}}n={radius:{handle:"#"+b+"_jGraduate_RadiusArrows",input:"#"+b+"_jGraduate_RadiusInput",val:(g.getAttribute("r")||0.5)*100},opacity:{handle:"#"+b+"_jGraduate_OpacArrows",input:"#"+b+"_jGraduate_OpacInput",val:e.paint.alpha||100},ellip:{handle:"#"+
b+"_jGraduate_EllipArrows",input:"#"+b+"_jGraduate_EllipInput",val:n},angle:{handle:"#"+b+"_jGraduate_AngleArrows",input:"#"+b+"_jGraduate_AngleInput",val:U}};$.each(n,function(c,a){var d=$(a.handle);d.mousedown(function(h){var f=d.parent();L={type:c,elem:d,input:$(a.input),parent:f,offset:f.offset()};N.mousemove(za).mouseup(Aa);h.preventDefault()});$(a.input).val(a.val).change(function(){var h=+this.value,f=0,l=p==="radialGradient";switch(c){case "radius":l&&g.setAttribute("r",h/100);f=Math.pow(h/
100,0.4)/2*145;break;case "opacity":e.paint.alpha=h;aa.setAttribute("fill-opacity",h/100);f=h*1.45;break;case "ellip":J=G=1;if(h===0){f=72.5;break}if(h>99.5)h=99.5;if(h>0)G=1-h/100;else J=-(h/100)-1;f=145*((h+100)/2)/100;l&&w();break;case "angle":T=h;f=T/180;f+=0.5;f*=145;l&&w()}if(f>145)f=145;else if(f<0)f=0;d.css({"margin-left":f-5})}).change()});var za=function(c){var a=c.pageX-L.offset.left-parseInt(L.parent.css("border-left-width"));if(a>145)a=145;if(a<=0)a=0;var d=a-5;a/=145;switch(L.type){case "radius":a=
Math.pow(a*2,2.5);if(a>0.98&&a<1.02)a=1;if(a<=0.01)a=0.01;g.setAttribute("r",a);break;case "opacity":e.paint.alpha=parseInt(a*100);aa.setAttribute("fill-opacity",a);break;case "ellip":G=J=1;if(a<0.5){a/=0.5;J=a<=0?0.01:a}else if(a>0.5){a/=0.5;a=2-a;G=a<=0?0.01:a}w();a-=1;if(G===a+1)a=Math.abs(a);break;case "angle":a-=0.5;T=a*=180;w();a/=100}L.elem.css({"margin-left":d});a=Math.round(a*100);L.input.val(a);c.preventDefault()},Aa=function(){N.unbind("mousemove",za).unbind("mouseup",Aa);L=null};for(n=
(e.paint.alpha*255/100).toString(16);n.length<2;)n="0"+n;n=n.split(".")[0];u=e.paint.solidColor=="none"?"":e.paint.solidColor+n;ba||(u=D[0].getAttribute("stop-color"));$.extend($.fn.jPicker.defaults.window,{alphaSupport:true,effects:{type:"show",speed:0}});Ca.jPicker({window:{title:o.window.pickerTitle},images:{clientPath:o.images.clientPath},color:{active:u,alphaSupport:true}},function(c){e.paint.type="solidColor";e.paint.alpha=c.val("ahex")?Math.round(c.val("a")/255*100):100;e.paint.solidColor=
c.val("hex")?c.val("hex"):"none";e.paint.radialGradient=null;ma()},null,function(){na()});var ka=$(s+" .jGraduate_tabs li");ka.click(function(){ka.removeClass("jGraduate_tab_current");$(this).addClass("jGraduate_tab_current");$(s+" > div").hide();var c=$(this).attr("data-type");$(s+" .jGraduate_gradPick").show();if(c==="rg"||c==="lg"){$(".jGraduate_"+c+"_field").show();$(".jGraduate_"+(c==="lg"?"rg":"lg")+"_field").hide();$("#"+b+"_jgraduate_rect")[0].setAttribute("fill","url(#"+b+"_"+c+"_jgraduate_grad)");
p=c==="lg"?"linearGradient":"radialGradient";$("#"+b+"_jGraduate_OpacInput").val(e.paint.alpha).change();var a=$("#"+b+"_"+c+"_jgraduate_grad")[0];if(g!==a){var d=$(g).find("stop");$(a).empty().append(d);g=a;a=ua.val();g.setAttribute("spreadMethod",a)}E=c==="rg"&&g.getAttribute("fx")!=null&&!(ca==qa&&da==ra);$("#"+b+"_jGraduate_focusCoord").toggle(E);if(E)$("#"+b+"_jGraduate_match_ctr")[0].checked=false}else{$(s+" .jGraduate_gradPick").hide();$(s+" .jGraduate_colPick").show()}});$(s+" > div").hide();
ka.removeClass("jGraduate_tab_current");var ea;switch(e.paint.type){case "linearGradient":ea=$(s+" .jGraduate_tab_lingrad");break;case "radialGradient":ea=$(s+" .jGraduate_tab_radgrad");break;default:ea=$(s+" .jGraduate_tab_color")}e.show();setTimeout(function(){ea.addClass("jGraduate_tab_current").click()},10)}else alert("Container element must have an id attribute to maintain unique id strings for sub-elements.")})}})();
(function(b){b.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta",219:"[",221:"]"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};function a(d){if(typeof d.data!=="string"){return}var c=d.handler,e=d.data.toLowerCase().split(" ");d.handler=function(n){if(this!==n.target&&(/textarea|select/i.test(n.target.nodeName)||n.target.type==="text")){return}var h=n.type!=="keypress"&&b.hotkeys.specialKeys[n.which],o=String.fromCharCode(n.which).toLowerCase(),k,m="",g={};if(n.altKey&&h!=="alt"){m+="alt+"}if(n.ctrlKey&&h!=="ctrl"){m+="ctrl+"}if(n.metaKey&&!n.ctrlKey&&h!=="meta"){m+="meta+"}if(n.shiftKey&&h!=="shift"){m+="shift+"}if(h){g[m+h]=true}else{g[m+o]=true;g[m+b.hotkeys.shiftNums[o]]=true;if(m==="shift+"){g[b.hotkeys.shiftNums[o]]=true}}for(var j=0,f=e.length;j<f;j++){if(g[e[j]]){return c.apply(this,arguments)}}}}b.each(["keydown","keyup","keypress"],function(){b.event.special[this]={add:a}})})(jQuery);
$.fn.SpinButton=function(b){function f(a,c){for(var e=a[c],d=document.body;(a=a.offsetParent)&&a!=d;)if(!$.browser.msie||a.currentStyle.position!="relative")e+=a[c];return e}return this.each(function(){this.repeating=false;this.spinCfg={min:b&&!isNaN(parseFloat(b.min))?Number(b.min):null,max:b&&!isNaN(parseFloat(b.max))?Number(b.max):null,step:b&&b.step?Number(b.step):1,stepfunc:b&&b.stepfunc?b.stepfunc:false,page:b&&b.page?Number(b.page):10,upClass:b&&b.upClass?b.upClass:"up",downClass:b&&b.downClass?
b.downClass:"down",reset:b&&b.reset?b.reset:this.value,delay:b&&b.delay?Number(b.delay):500,interval:b&&b.interval?Number(b.interval):100,_btn_width:20,_direction:null,_delay:null,_repeat:null,callback:b&&b.callback?b.callback:null};this.spinCfg.smallStep=b&&b.smallStep?b.smallStep:this.spinCfg.step/2;this.adjustValue=function(a){a=isNaN(this.value)?this.spinCfg.reset:$.isFunction(this.spinCfg.stepfunc)?this.spinCfg.stepfunc(this,a):Number((Number(this.value)+Number(a)).toFixed(5));if(this.spinCfg.min!==
null)a=Math.max(a,this.spinCfg.min);if(this.spinCfg.max!==null)a=Math.min(a,this.spinCfg.max);this.value=a;$.isFunction(this.spinCfg.callback)&&this.spinCfg.callback(this)};$(this).addClass(b&&b.spinClass?b.spinClass:"spin-button").mousemove(function(a){var c=a.pageX||a.x,e=a.pageY||a.y;a=a.target||a.srcElement;var d=svgEditor.tool_scale||1,g=$(a).height()/2;c=c>f(a,"offsetLeft")+a.offsetWidth*d-this.spinCfg._btn_width?e<f(a,"offsetTop")+g*d?1:-1:0;if(c!==this.spinCfg._direction){switch(c){case 1:$(this).removeClass(this.spinCfg.downClass).addClass(this.spinCfg.upClass);
break;case -1:$(this).removeClass(this.spinCfg.upClass).addClass(this.spinCfg.downClass);break;default:$(this).removeClass(this.spinCfg.upClass).removeClass(this.spinCfg.downClass)}this.spinCfg._direction=c}}).mouseout(function(){$(this).removeClass(this.spinCfg.upClass).removeClass(this.spinCfg.downClass);this.spinCfg._direction=null;window.clearInterval(this.spinCfg._repeat);window.clearTimeout(this.spinCfg._delay)}).mousedown(function(a){if(a.button===0&&this.spinCfg._direction!=0){var c=this,
e=a.shiftKey?c.spinCfg.smallStep:c.spinCfg.step,d=function(){c.adjustValue(c.spinCfg._direction*e)};d();c.spinCfg._delay=window.setTimeout(function(){d();c.spinCfg._repeat=window.setInterval(d,c.spinCfg.interval)},c.spinCfg.delay)}}).mouseup(function(){window.clearInterval(this.spinCfg._repeat);window.clearTimeout(this.spinCfg._delay)}).dblclick(function(){$.browser.msie&&this.adjustValue(this.spinCfg._direction*this.spinCfg.step)}).keydown(function(a){switch(a.keyCode){case 38:this.adjustValue(this.spinCfg.step);
break;case 40:this.adjustValue(-this.spinCfg.step);break;case 33:this.adjustValue(this.spinCfg.page);break;case 34:this.adjustValue(-this.spinCfg.page)}}).keypress(function(a){if(this.repeating)switch(a.keyCode){case 38:this.adjustValue(this.spinCfg.step);break;case 40:this.adjustValue(-this.spinCfg.step);break;case 33:this.adjustValue(this.spinCfg.page);break;case 34:this.adjustValue(-this.spinCfg.page)}else this.repeating=true}).keyup(function(a){this.repeating=false;switch(a.keyCode){case 38:case 40:case 33:case 34:case 13:this.adjustValue(0)}}).bind("mousewheel",
function(a){if(a.wheelDelta>=120)this.adjustValue(this.spinCfg.step);else a.wheelDelta<=-120&&this.adjustValue(-this.spinCfg.step);a.preventDefault()}).change(function(){this.adjustValue(0)});this.addEventListener&&this.addEventListener("DOMMouseScroll",function(a){if(a.detail>0)this.adjustValue(-this.spinCfg.step);else a.detail<0&&this.adjustValue(this.spinCfg.step);a.preventDefault()},false)})};
(function(n){var t={},i;n.svgIcons=function(r,u){function h(t,i){var r,s;if(t!=="ajax"){if(b)return;if(f=e[0].contentDocument,r=f&&f.getElementById("svg_eof"),!r&&!(i&&r)){nt++;nt<50?setTimeout(h,20):(o(),b=!0);return}b=!0}y=n(f.firstChild).children();u.no_img?setTimeout(function(){w||c()},500):(s=it+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzUiIGhlaWdodD0iMjc1Ij48L3N2Zz4%3D",p=n(new Image).attr({src:s,width:0,height:0}).appendTo("body").load(function(){c(!0)}).error(function(){c()}))}function c(r,f){var ft,b,et,ot,c,nt,k,h,o,st,ht,ct,tt,lt;if(!w){if(u.no_img&&(r=!1),r&&(b=n(document.createElement("div")),b.hide().appendTo("body")),f)et=u.fallback_path?u.fallback_path:"",n.each(f,function(t,i){ft=n("#"+t);var r=n(new Image).attr({"class":"svg_icon",src:et+i,width:a,height:v,alt:"icon"});g(r,t)});else for(ot=y.length,c=0;c<ot;c++){if(nt=y[c],k=nt.id,k==="svg_eof")break;ft=n("#"+k);h=nt.getElementsByTagNameNS(l,"svg")[0];o=document.createElementNS(l,"svg");o.setAttributeNS(null,"viewBox",[0,0,a,v].join(" "));st=h.getAttribute("width");ht=h.getAttribute("height");h.removeAttribute("width");h.removeAttribute("height");ct=h.getAttribute("viewBox");ct||h.setAttribute("viewBox",[0,0,st,ht].join(" "));o.setAttribute("xmlns",l);o.setAttribute("width",a);o.setAttribute("height",v);o.setAttribute("xmlns:xlink",rt);o.setAttribute("class","svg_icon");s||(h=h.cloneNode(!0));o.appendChild(h);r?(b.empty().append(o),lt=it+ut(unescape(encodeURIComponent((new XMLSerializer).serializeToString(o)))),tt=n(new Image).attr({"class":"svg_icon",src:lt})):tt=i(n(o),c);g(tt,k)}u.placement&&n.each(u.placement,function(u,f){t[f]&&n(u).each(function(u){var e=t[f].clone();u>0&&!r&&(e=i(e,u,!0));d(n(this),e,f)})});f||(r&&b.remove(),e&&e.remove(),p&&p.remove());u.resize&&n.resizeSvgIcons(u.resize);w=!0;u.callback&&u.callback(t)}}function o(){if(r.indexOf(".svgz")!=-1){var t=r.replace(".svgz",".svg");window.console&&console.log(".svgz failed, trying with .svg");n.svgIcons(t,u)}else u.fallback&&c(!1,u.fallback)}function ut(n){if(window.btoa)return window.btoa(n);var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t=new Array(Math.floor((n.length+2)/3)*4),s,r,u,c,l,h,f,e=0,o=0;do s=n.charCodeAt(e++),r=n.charCodeAt(e++),u=n.charCodeAt(e++),c=s>>2,l=(s&3)<<4|r>>4,h=(r&15)<<2|u>>6,f=u&63,isNaN(r)?h=f=64:isNaN(u)&&(f=64),t[o++]=i.charAt(c),t[o++]=i.charAt(l),t[o++]=i.charAt(h),t[o++]=i.charAt(f);while(e<n.length);return t.join("")}var l="http://www.w3.org/2000/svg",rt="http://www.w3.org/1999/xlink",a=u.w?u.w:24,v=u.h?u.h:24,y,f,p,w=!1,b=!1,nt=0,tt=navigator.userAgent,s=!!window.opera,ft=tt.indexOf("Safari/")>-1&&tt.indexOf("Chrome/")==-1,it="data:image/svg+xml;charset=utf-8;base64,",e,k,d,g;if(u.svgz){e=n('<object data="'+r+'" type=image/svg+xml>').appendTo("body").hide();try{f=e[0].contentDocument;e.load(h);h(0,!0)}catch(et){o()}}else k=new DOMParser,n.ajax({url:r,dataType:"string",success:function(t){if(!t){n(o);return}f=k.parseFromString(t,"text/xml");n(function(){h("ajax")})},error:function(t){window.opera?n(function(){o()}):t.responseText?(f=k.parseFromString(t.responseText,"text/xml"),f.childNodes.length||n(o),n(function(){h("ajax")})):n(o)}});d=function(n,t,i,r){if(s&&t.css("visibility","hidden"),u.replace){r&&t.attr("id",i);var f=n.attr("class");f&&t.attr("class","svg_icon "+f);n.replaceWith(t)}else n.append(t);s&&setTimeout(function(){t.removeAttr("style")},1)};g=function(n,i){(u.id_match===undefined||u.id_match!==!1)&&d(holder,n,i,!0);t[i]=n};i=function(t,i){var r=t.find("defs"),e,u,o;return r.length?(e=s?r.find("*").filter(function(){return!!this.id}):r.find("[id]"),u=t[0].getElementsByTagName("*"),o=u.length,e.each(function(t){var c=this.id,a=n(f).find("#"+c).length<=1,l,e,h,r;for(s&&(a=!1),l="x"+c+i+t,this.id=l,e="url(#"+c+")",h="url(#"+l+")",t=0;t<o;t++)r=u[t],r.getAttribute("fill")===e&&r.setAttribute("fill",h),r.getAttribute("stroke")===e&&r.setAttribute("stroke",h),r.getAttribute("filter")===e&&r.setAttribute("filter",h)}),t):t}};n.getSvgIcon=function(n,r){var u=t[n];return r&&u&&(u=i(u,0,!0).clone(!0)),u};n.resizeSvgIcons=function(t){var i=!n(".svg_icon:first").length;n.each(t,function(t,r){var u=n.isArray(r),f=u?r[0]:r,e=u?r[1]:r;i&&(t=t.replace(/\.svg_icon/g,"svg"));n(t).each(function(){this.setAttribute("width",f);this.setAttribute("height",e);window.opera&&window.widget&&(this.parentNode.style.width=f+"px",this.parentNode.style.height=e+"px")})})}})(jQuery);