{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#welcome-to-the-fuxa-wiki","title":"Welcome to the FUXA wiki!","text":"<p>FUXA is a powerful web-based software to rapidly build and deploy scalable SCADA, HMI, Dashboard or IIoT systems. With FUXA you can create modern process visualizations with individual designs for your machines and real-time data display, as well as control instrument of automated industrial plants.</p> <p></p> <p>FUXA supports commonly used communication standards such as Siemens S7 protocol and OPC UA that allow to connect third-party OPC servers. The list of supported  communication standards can be extended by developing additional drivers.</p> <p>The software model of FUXA is based on a Node.js runtime that you point a web browser at to access the editor to create your app (SCADA/HMI/Dashboard) and as client you can run your visualizations.</p>"},{"location":"#user-interface","title":"User Interface","text":"<p>FUXA is composed from two differents views: FUXA-editor to edit the project and FUXA-view to show the product of your visualization project.</p> <p></p>"},{"location":"#features","title":"Features","text":"<p>The FUXA not require any runtime licenses. You can build your HMI projects in any number and size and you do not need to worry about further licensing the runtime environment.</p>"},{"location":"#communication-protocols","title":"Communication Protocols","text":"<p>The FUXA Platform includes connectors to achieve direct communications to Siemens PLCs and OPC UA data sources: - A client for OPC UA connectivity. - S7 Protocol to communicate over Ethernet with Siemens CPU 200, 300, 400, 1200, and 1500. - Modbus RTU/TCP, BACnet IP, MQTT, Ethernet/IP (Allen Bradley), WebAPI</p>"},{"location":"#cross-platform-full-stack","title":"Cross-Platform Full-Stack","text":"<p>This system is designed to operate in various operating systems, with easy installation. Backend is develop with NodeJs. The user-interface is a scalable HTML5 web frontend, develop with Web technologies (HTML5, CSS, Javascript, Angular, SVG) and compatible with all recent browsers.</p>"},{"location":"Getting-Started/","title":"Getting Started","text":""},{"location":"Getting-Started/#getting-started-with-fuxa","title":"Getting started with FUXA","text":"<p>The goal of this tutorial is to demonstrate the basic usage of the most popular FUXA features. You will learn how to: - Connect devices to FUXA - Push data from devices to FUXA - Build a real-time GUI SCADA/HMI/Dashboard - Define thresholds and trigger alarms</p>"},{"location":"Getting-Started/#prerequisites","title":"Prerequisites","text":"<p>You will need to have FUXA server up and running. To install FUXA using Installation Guide. FUXA UI will be available using the URL: http://localhost:1881.</p> <p>Principally FUXA web server performs two page:  - Visualization for end-user http://localhost:1881/home - Editor to project and design http://localhost:1881/editor</p>"},{"location":"Getting-Started/#step-1-connect-device-and-configure-tags","title":"Step 1. Connect device and configure tags","text":"<p>To connect the device you need to get the device credentials first. FUXA supports various devices: Modbus RTU/TCP, Siemens S7 Protocol, OPC-UA, BACnet IP, MQTT, Ethernet/IP (Allen Bradley). After you connected to a device, you can configure the subscriptions of the live values, Tags, Sensor, etc. You may find configuration guide by here HowTo Devices and Tags</p>"},{"location":"Getting-Started/#step-2-create-visualization","title":"Step 2. Create Visualization","text":"<p>We will create a View and add the most popular widgets. See the instructions below.</p> <p>### Step 2.1 Create Empty View    HowTo create View    ### Step 2.2 Bind Controls to View    HowTo bind Controls    ### Step 2.3 Bind Shapes to View    HowTo bind Shapes    ### Step 2.4 Bind Chart Control to View    HowTo chart Control</p>"},{"location":"Getting-Started/#step-3-configure-ui-layout","title":"Step 3. Configure UI Layout","text":"<p>HowTo UI Layout</p>"},{"location":"Getting-Started/#step-4-configure-alarms","title":"Step 4. Configure Alarms","text":"<p>HowTo setup Alarms</p>"},{"location":"Getting-Started/#step-5-activate-and-create-customer-user","title":"Step 5. Activate and create customer user","text":""},{"location":"Getting-Started/#tips-and-tricks","title":"Tips and tricks","text":""},{"location":"HowTo-Chart-Control/","title":"Chart Control","text":"<p>To add a Chart Control to a View:: going in editor and select the View. </p> <p>In Line charts you can define your diagrams to be attached to the chart control. </p>"},{"location":"HowTo-Devices-and-Tags/","title":"Devices and Tags","text":"<p>To add your Device and Tags going to Connections in editor.</p> <p></p> <p>Add and connect a OPCUA device. </p> <p>To add OPCUA Tags the device have to be connected. </p> <p>To add a Modbus connection you have to install the driver in Plugins </p> <p>Add a MQTT connection and a topic subscription </p> <p>Add a WebAPI connection and a Tag of the JSON result </p> <p>Tag Options</p> <p>If you have any Tag types which don't have a defined data type you can set this. For example TIME data type is no a defined type, but the base data type is normally int64 or uint64 and the time is in milliseconds.</p> <p></p> <p>You can also under tag options use the scale script to do any data type conversions etc for example the data from TIME is an array of LOW and HIGH, we can create a simple script to grab the array element and return it as a number type. We can then just return the actual value for write if needed.</p> <p></p> <p>Important! the script parameter must be called value as there is a filter to display relevant scripts for selection. Do not use comments in this script as they are not supported. </p> <p>Here is the read script which returns the array element</p> <p></p> <p>Here is the write script returning the actual tag value</p> <p></p>"},{"location":"HowTo-Node-Red/","title":"HowTo Node-RED Integration","text":""},{"location":"HowTo-Node-Red/#overview","title":"Overview","text":"<p>FUXA includes full Node-RED integration, allowing you to create powerful automation flows that interact with your SCADA system.</p>"},{"location":"HowTo-Node-Red/#setup-and-installation","title":"Setup and Installation","text":""},{"location":"HowTo-Node-Red/#node-red-in-fuxa","title":"Node-RED in FUXA","text":"<p>Node-RED is automatically included with FUXA and requires no additional installation. Access it through the FUXA settings menu.</p>"},{"location":"HowTo-Node-Red/#installing-dashboard-2","title":"Installing Dashboard 2","text":"<p>Dashboard 2 must be installed separately if needed:</p> <ol> <li>Open Node-RED editor (via FUXA settings)</li> <li>Click the menu (\u2630) \u2192 Manage Palette</li> <li>Search for: <code>@flowfuse/node-red-dashboard</code></li> <li>Click Install</li> <li>Restart Node-RED/FUXA</li> </ol>"},{"location":"HowTo-Node-Red/#required-dependencies","title":"Required Dependencies","text":"<ul> <li>@flowfuse/node-red-dashboard: For modern dashboard creation</li> <li>node-red-contrib-fuxa: Automatically included (provides FUXA integration nodes)</li> </ul>"},{"location":"HowTo-Node-Red/#configuration","title":"Configuration","text":"<p>No additional configuration is required. Node-RED automatically connects to FUXA's runtime environment.</p>"},{"location":"HowTo-Node-Red/#security-and-access-mode","title":"Security and Access Mode","text":"<p>Node-RED access can be configured when FUXA security is enabled.</p> <p>Setting: <code>nodeRedAuthMode</code></p> <ul> <li><code>secure</code> (default): Node-RED editor and admin APIs require authentication (JWT or API key).</li> <li><code>legacy-open</code>: Node-RED remains open (no auth) to preserve legacy behavior.</li> </ul> <p>Notes: - Changes apply after server restart. - If <code>secureEnabled=true</code> and <code>nodeRedAuthMode=secure</code>, external systems can access Node-RED HTTP endpoints using an API key header:   <code>x-api-key: &lt;api-key&gt;</code>   API keys are managed in FUXA under Editor \u2192 Setup \u2192 API Keys.</p>"},{"location":"HowTo-Node-Red/#accessing-node-red","title":"Accessing Node-RED","text":""},{"location":"HowTo-Node-Red/#node-red-editor","title":"Node-RED Editor","text":"<p>Access the Node-RED flow editor through the FUXA settings:</p> <ol> <li>Click the Settings button in FUXA</li> <li>Navigate to Node-RED section</li> <li>Click Open Node-RED Editor</li> </ol> <p>This opens the Node-RED flow editor in a new window/tab.</p>"},{"location":"HowTo-Node-Red/#dashboard-2","title":"Dashboard 2","text":"<p>Note: Dashboard 2 is not installed by default and must be installed separately.</p>"},{"location":"HowTo-Node-Red/#installation","title":"Installation","text":"<ol> <li>In Node-RED, go to Menu \u2192 Manage Palette</li> <li>Search for and install: <code>@flowfuse/node-red-dashboard</code></li> <li>Restart Node-RED/FUXA</li> </ol>"},{"location":"HowTo-Node-Red/#accessing-dashboard-2","title":"Accessing Dashboard 2","text":"<p>Once installed, view your Node-RED dashboards:</p> <p>Embedded in FUXA Views: Add an iframe component to any FUXA view</p>"},{"location":"HowTo-Node-Red/#embedding-dashboard-in-fuxa-view","title":"Embedding Dashboard in FUXA View","text":"<ol> <li>Open your FUXA project in the editor</li> <li>Add an iframe component to your view</li> <li>Set the URL to: <code>/dashboard</code></li> <li>Configure the iframe size and properties as needed</li> <li>If you only want to display a single page you can adjust dashboard settings and use <code>/dashboard/page1</code> or the name of your page</li> </ol> <p>Important: Dashboard 2 must be installed before attempting to access <code>/dashboard</code></p>"},{"location":"HowTo-Node-Red/#fuxa-contrib-nodes","title":"FUXA Contrib Nodes","text":"<p>The FUXA contrib package provides specialized nodes for SCADA integration, this package is designed to only work with the FUXA Node-Red Integration and will not work in a standalone Node-Red installation</p>"},{"location":"HowTo-Node-Red/#tags-nodes","title":"Tags Nodes","text":""},{"location":"HowTo-Node-Red/#get-tag","title":"get-tag","text":"<p>Purpose: Retrieve the current value of a FUXA tag</p> <p>Parameters: - Name: Optional node name for identification - Tag: Tag name (dropdown populated from FUXA devices)</p> <p>Input: Any message (triggers tag read) Output: <code>msg.payload</code> contains the tag value</p> <p>Example Output:</p> <pre><code>{\n  \"payload\": 25.3,\n  \"_msgid\": \"abc123\"\n}\n</code></pre>"},{"location":"HowTo-Node-Red/#set-tag","title":"set-tag","text":"<p>Purpose: Write a value to a FUXA tag</p> <p>Parameters: - Name: Optional node name for identification - Tag: Tag name (dropdown populated from FUXA devices)</p> <p>Input: <code>msg.payload</code> contains the value to write Output: <code>msg.payload</code> contains the written value</p> <p>Example Input:</p> <pre><code>{\n  \"payload\": 50.0\n}\n</code></pre>"},{"location":"HowTo-Node-Red/#get-tag-change","title":"get-tag-change","text":"<p>Purpose: Monitor a FUXA tag for value changes based on device polling events</p> <p>Parameters: - Name: Optional node name for identification - Tag: Tag name (dropdown populated from FUXA devices)</p> <p>Input: None (event-driven) Output: <code>msg.payload</code> contains the new tag value when it changes</p> <p>How it works: This node subscribes to FUXA's device polling events. When devices are polled and a tag value has changed since the last poll, the node outputs a message with the new value. The timing depends on the device's polling interval (typically 1-5 seconds).</p> <p>Example Output:</p> <pre><code>{\n  \"payload\": 25.3,\n  \"topic\": \"temperature\",\n  \"tagId\": \"device1.temperature\",\n  \"tagName\": \"temperature\",\n  \"timestamp\": \"2025-01-01T10:30:00.000Z\",\n  \"previousValue\": 24.8\n}\n</code></pre> <p>Note: This node only outputs messages when tag values actually change, not on every polling cycle. It efficiently monitors for changes without requiring manual polling.</p>"},{"location":"HowTo-Node-Red/#get-tag-id","title":"get-tag-id","text":"<p>Purpose: Get the internal ID of a tag by name</p> <p>Parameters: - Name: Optional node name for identification - Tag: Tag name (dropdown populated from FUXA devices)</p> <p>Input: Any message Output: <code>msg.payload</code> contains the tag ID</p>"},{"location":"HowTo-Node-Red/#get-historical-tags","title":"get-historical-tags","text":"<p>Purpose: Retrieve historical tag data for multiple tags simultaneously</p> <p>Parameters: - Name: Optional node name for identification - Tags: Comma-separated list of tag names (e.g., \"temp1,temp2,pressure\") - From Time: Start of historical period (datetime-local picker) - To Time: End of historical period (datetime-local picker)</p> <p>Input: Any message or override with <code>msg.tags</code>, <code>msg.from</code>, <code>msg.to</code> Output: <code>msg.payload</code> contains historical data array</p> <p>Multiple Tags Support: - Enter tags as comma-separated values: <code>temp1,temp2,pressure</code> - Each tag's historical data is retrieved for the same time period - Results are combined in a single response</p> <p>Example Input (comma-separated):</p> <pre><code>{\n  \"tags\": \"temp1,temp2,pressure\",\n  \"from\": \"2025-01-01T08:00\",\n  \"to\": \"2025-01-01T17:00\"\n}\n</code></pre> <p>Example Input (array):</p> <pre><code>{\n  \"tags\": [\"temp1\", \"temp2\", \"pressure\"],\n  \"from\": \"2025-01-01T08:00\",\n  \"to\": \"2025-01-01T17:00\"\n}\n</code></pre> <p>Example Output:</p> <pre><code>{\n  \"payload\": [\n    {\n      \"tag\": \"temp1\",\n      \"data\": [\n        {\"timestamp\": \"2025-01-01T08:00:00Z\", \"value\": 25.3},\n        {\"timestamp\": \"2025-01-01T09:00:00Z\", \"value\": 26.1}\n      ]\n    },\n    {\n      \"tag\": \"temp2\",\n      \"data\": [\n        {\"timestamp\": \"2025-01-01T08:00:00Z\", \"value\": 24.8},\n        {\"timestamp\": \"2025-01-01T09:00:00Z\", \"value\": 25.2}\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"HowTo-Node-Red/#get-tag-daq-settings","title":"get-tag-daq-settings","text":"<p>Purpose: Get DAQ (Data Acquisition) settings for a tag</p> <p>Parameters: - Name: Optional node name for identification - Tag: Tag name (dropdown populated from FUXA devices)</p> <p>Input: Any message Output: <code>msg.payload</code> contains DAQ settings object</p>"},{"location":"HowTo-Node-Red/#set-tag-daq-settings","title":"set-tag-daq-settings","text":"<p>Purpose: Configure DAQ (Data Acquisition) settings for a tag</p> <p>Parameters: - Name: Optional node name for identification - Tag: Tag name (dropdown populated from FUXA devices) - Enabled: Checkbox to enable/disable DAQ for this tag - Interval: Sampling interval in milliseconds - Deadband: Minimum change threshold for data updates</p> <p>Input: Any message or override with <code>msg.tag</code>, <code>msg.enabled</code>, <code>msg.interval</code>, <code>msg.deadband</code> Output: <code>msg.payload</code> contains updated settings</p> <p>DAQ Settings: - Enabled: Turn data acquisition on/off for this tag - Interval: How often to sample the tag (in milliseconds) - Deadband: Only report changes greater than this threshold (prevents noise)</p>"},{"location":"HowTo-Node-Red/#devices-nodes","title":"Devices Nodes","text":""},{"location":"HowTo-Node-Red/#enable-device","title":"enable-device","text":"<p>Purpose: Enable or disable a device connection</p> <p>Parameters: - Name: Optional node name for identification - Device Name: Device name (dropdown populated from FUXA devices) - Enabled: Checkbox to enable/disable the device</p> <p>Input: Any message or override with <code>msg.deviceName</code>, <code>msg.enabled</code> Output: <code>msg.payload</code> contains operation result</p> <p>Enable/Disable: Check the box to enable device, uncheck to disablenterface for connecting devices, processing data, and controlling your industrial processes.</p>"},{"location":"HowTo-Node-Red/#get-device","title":"get-device","text":"<p>Purpose: Get information about a FUXA device</p> <p>Parameters: - Name: Optional node name for identification - Device Name: Device name (dropdown populated from FUXA devices) - Include Tags: Checkbox to include tag information in the response</p> <p>Input: Any message or override with <code>msg.deviceName</code>, <code>msg.includeTags</code> Output: <code>msg.payload</code> contains device information object</p> <p>Include Tags: When checked, the response includes all tags associated with the device</p>"},{"location":"HowTo-Node-Red/#enable-device_1","title":"enable-device","text":"<p>Purpose: Enable or disable a device connection</p> <p>Parameters: - Name: Optional node name for identification - Device: Device name (dropdown populated from FUXA devices) - Enable: Checkbox to enable/disable</p> <p>Input: Any message or override with <code>msg.enable</code> Output: <code>msg.payload</code> contains operation result</p>"},{"location":"HowTo-Node-Red/#get-device-property","title":"get-device-property","text":"<p>Purpose: Get a property value from a device</p> <p>Parameters: - Name: Optional node name for identification - Device Name: Device name (dropdown populated from FUXA devices) - Property: Property name to retrieve</p> <p>Input: Any message or override with <code>msg.deviceName</code>, <code>msg.property</code> Output: <code>msg.payload</code> contains property value</p> <p>Property Names: Common properties include \"status\", \"connected\", \"lastError\", etc.</p>"},{"location":"HowTo-Node-Red/#set-device-property","title":"set-device-property","text":"<p>Purpose: Set a property value on a device</p> <p>Parameters: - Name: Optional node name for identification - Device Name: Device name (dropdown populated from FUXA devices) - Property: Property name to set - Value: Value to set for the property</p> <p>Input: <code>msg.payload</code> contains the value or override with <code>msg.deviceName</code>, <code>msg.property</code>, <code>msg.value</code> Output: <code>msg.payload</code> contains the set value</p>"},{"location":"HowTo-Node-Red/#alarms-nodes","title":"Alarms Nodes","text":""},{"location":"HowTo-Node-Red/#get-alarms","title":"get-alarms","text":"<p>Purpose: Get current active alarms</p> <p>Parameters: - Name: Optional node name for identification</p> <p>Input: Any message Output: <code>msg.payload</code> contains array of active alarms</p> <p>Example Output:</p> <pre><code>{\n  \"payload\": [\n    {\n      \"id\": \"alarm1\",\n      \"name\": \"High Temperature\",\n      \"status\": \"active\",\n      \"timestamp\": \"2025-01-01T10:30:00Z\",\n      \"value\": 85.5\n    }\n  ]\n}\n</code></pre>"},{"location":"HowTo-Node-Red/#get-history-alarms","title":"get-history-alarms","text":"<p>Purpose: Get historical alarm data</p> <p>Parameters: - Name: Optional node name for identification - Start Time: Start of historical period (datetime-local picker) - End Time: End of historical period (datetime-local picker)</p> <p>Input: Any message or override with <code>msg.startTime</code> and <code>msg.endTime</code> Output: <code>msg.payload</code> contains historical alarms array</p>"},{"location":"HowTo-Node-Red/#ack-alarm","title":"ack-alarm","text":"<p>Purpose: Acknowledge alarms in FUXA</p> <p>Parameters: - Name: Optional node name for identification - Alarm Name: Alarm name (dropdown populated from FUXA alarms) - Types: Comma-separated alarm types (optional)</p> <p>Input: Any message or override with <code>msg.alarmName</code>, <code>msg.types</code> Output: <code>msg.payload</code> contains acknowledgment result</p> <p>Alarm Types: Specify alarm types to acknowledge specific alarm categories (comma-separated: \"warning,error,critical\")</p>"},{"location":"HowTo-Node-Red/#views-nodes","title":"Views Nodes","text":""},{"location":"HowTo-Node-Red/#set-view","title":"set-view","text":"<p>Purpose: Change the current view in FUXA</p> <p>Parameters: - Name: Optional node name for identification - View Name: View name (dropdown populated from FUXA views)</p> <p>Input: Any message or override with <code>msg.viewName</code> Output: <code>msg.payload</code> contains operation result</p>"},{"location":"HowTo-Node-Red/#open-card","title":"open-card","text":"<p>Purpose: Open a specific card/dialog in FUXA</p> <p>Parameters: - Name: Optional node name for identification - Card: Card name (dropdown populated from FUXA cards)</p> <p>Input: Any message or override with <code>msg.cardName</code> Output: <code>msg.payload</code> contains operation result</p>"},{"location":"HowTo-Node-Red/#scripts-nodes","title":"Scripts Nodes","text":""},{"location":"HowTo-Node-Red/#execute-script","title":"execute-script","text":"<p>Purpose: Execute a FUXA script</p> <p>Parameters: - Name: Optional node name for identification - Script: Script name (dropdown populated from FUXA scripts)</p> <p>Input: Any message or override with <code>msg.scriptName</code> Output: <code>msg.payload</code> contains execution result</p> <p>Example Output:</p> <pre><code>{\n  \"payload\": {\n    \"success\": true,\n    \"script\": \"myScript\",\n    \"result\": \"Script completed successfully\",\n    \"timestamp\": \"2025-01-01T10:45:00Z\"\n  }\n}\n</code></pre>"},{"location":"HowTo-Node-Red/#daq-nodes","title":"DAQ Nodes","text":""},{"location":"HowTo-Node-Red/#get-daq","title":"get-daq","text":"<p>Purpose: Get Data Acquisition (DAQ) data for a single tag</p> <p>Parameters: - Name: Optional node name for identification - Tag: Single tag name (dropdown populated from FUXA devices) - From Time: Start of DAQ period (datetime-local picker) - To Time: End of DAQ period (datetime-local picker)</p> <p>Input: Any message or override with <code>msg.from</code>, <code>msg.to</code> Output: <code>msg.payload</code> contains DAQ data for the single tag</p> <p>Single Tag Only: Unlike get-historical-tags, this node only processes one tag at a time. For multiple tags, use separate get-daq nodes or get-historical-tags.</p> <p>Example Output:</p> <pre><code>{\n  \"payload\": [\n    {\"timestamp\": \"2025-01-01T10:00:00Z\", \"value\": 25.3, \"quality\": \"good\"},\n    {\"timestamp\": \"2025-01-01T10:01:00Z\", \"value\": 25.8, \"quality\": \"good\"}\n  ]\n}\n</code></pre>"},{"location":"HowTo-Node-Red/#events-nodes","title":"Events Nodes","text":""},{"location":"HowTo-Node-Red/#emit-event","title":"emit-event","text":"<p>Purpose: Emit custom events through FUXA's event system for inter-system communication and automation triggering</p> <p>Parameters: - Name: Optional node name for identification - Event Type: Custom event name/type (e.g., \"machine-fault\", \"production-complete\", \"maintenance-required\")</p> <p>Input: <code>msg.payload</code> contains the event data (any format: string, number, object, array) Output: <code>msg.payload</code> unchanged (passes through)</p> <p>Event Types and Usage:</p> <p>System Events (built-in FUXA events): - <code>device-status</code> - Device connection status changes - <code>device-property</code> - Device property updates - <code>device-values</code> - Tag value changes - <code>alarms-status</code> - Alarm state changes - <code>script-console</code> - Script console output - <code>heartbeat</code> - System heartbeat/alive signals</p> <p>Custom Events (user-defined): - <code>production-start</code> - Production line started - <code>production-stop</code> - Production line stopped - <code>quality-alert</code> - Quality control alert - <code>maintenance-due</code> - Equipment maintenance required - <code>operator-login</code> - Operator authentication - <code>batch-complete</code> - Production batch finished</p> <p>Event Data Examples:</p> <p>Simple string event:</p> <pre><code>{\n  \"payload\": \"Machine fault detected\"\n}\n</code></pre> <p>Structured event data:</p> <pre><code>{\n  \"payload\": {\n    \"eventType\": \"production-alert\",\n    \"machine\": \"Line-A\",\n    \"severity\": \"high\",\n    \"timestamp\": \"2025-01-01T10:30:00Z\",\n    \"details\": {\n      \"temperature\": 85.5,\n      \"pressure\": 2.1,\n      \"errorCode\": \"E-202\"\n    }\n  }\n}\n</code></pre> <p>Array data event:</p> <pre><code>{\n  \"payload\": [\n    {\"sensor\": \"temp1\", \"value\": 75.2},\n    {\"sensor\": \"temp2\", \"value\": 76.8},\n    {\"sensor\": \"temp3\", \"value\": 74.9}\n  ]\n}\n</code></pre> <p>How Events Work: 1. Events are emitted to FUXA's internal event system 2. Other FUXA components can listen for these events 3. Events can trigger scripts, update displays, or initiate automation sequences 4. Events persist until consumed or the system restarts</p> <p>Common Use Cases: - Machine Monitoring: Emit events when equipment enters fault states - Production Tracking: Signal production milestones or quality issues - Maintenance Alerts: Notify when equipment needs servicing - Operator Notifications: Alert operators to system conditions - Data Integration: Send structured data to external systems</p> <p>Integration with Scripts: Events can be consumed by FUXA scripts using the event system. Scripts can listen for specific event types and execute automated responses.</p>"},{"location":"HowTo-Node-Red/#send-message","title":"send-message","text":"<p>Purpose: Send email notifications or messages through FUXA's notification system</p> <p>Parameters: - Name: Optional node name for identification - Address: Recipient email address - Subject: Email subject line - Message: Default message content (can be overridden)</p> <p>Input: <code>msg.payload</code> can contain message data or override with <code>msg.address</code>, <code>msg.subject</code>, <code>msg.message</code> Output: <code>msg.payload</code> contains send result</p> <p>Message Format Options:</p> <p>Simple text message (uses configured address/subject):</p> <pre><code>{\n  \"payload\": \"Alert: Temperature exceeded threshold\"\n}\n</code></pre> <p>Complete message override:</p> <pre><code>{\n  \"address\": \"operator@company.com\",\n  \"subject\": \"Production Alert\",\n  \"message\": \"Line A has stopped due to maintenance requirement\"\n}\n</code></pre> <p>Multiple recipients:</p> <pre><code>{\n  \"address\": [\"operator1@company.com\", \"supervisor@company.com\"],\n  \"subject\": \"Quality Control Alert\",\n  \"message\": \"Batch #1234 failed quality inspection\"\n}\n</code></pre>"},{"location":"HowTo-Node-Red/#data-formats","title":"Data Formats","text":""},{"location":"HowTo-Node-Red/#tag-values","title":"Tag Values","text":"<p>Tag values can be: - Numbers: <code>25.3</code>, <code>100</code>, <code>0</code> - Strings: <code>\"Running\"</code>, <code>\"Stopped\"</code> - Booleans: <code>true</code>, <code>false</code> - Objects: Complex data structures</p>"},{"location":"HowTo-Node-Red/#timestamps","title":"Timestamps","text":"<p>All timestamps use ISO 8601 format:</p> <pre><code>\"2025-01-01T10:30:00.000Z\"\n</code></pre>"},{"location":"HowTo-Node-Red/#error-handling","title":"Error Handling","text":"<p>All nodes output errors to the debug tab. Common error patterns:</p> <pre><code>{\n  \"payload\": null,\n  \"_msgid\": \"abc123\",\n  \"error\": \"Tag not found: myTag\"\n}\n</code></pre>"},{"location":"HowTo-Node-Red/#troubleshooting","title":"Troubleshooting","text":""},{"location":"HowTo-Node-Red/#dashboard-not-loading","title":"Dashboard Not Loading","text":"<p>Problem: <code>/dashboard</code> shows error or blank page</p> <p>Solution: Install Dashboard 2 1. Open Node-RED editor 2. Go to Manage Palette 3. Install <code>@flowfuse/node-red-dashboard</code> 4. Restart Node-RED/FUXA</p>"},{"location":"HowTo-Node-Red/#fuxa-nodes-not-appearing","title":"FUXA Nodes Not Appearing","text":"<p>Problem: FUXA contrib nodes not visible in palette</p> <p>Solution: Check Node-RED logs for errors. The nodes are automatically registered when FUXA starts Node-RED.</p>"},{"location":"HowTo-Node-Red/#dropdowns-not-populated","title":"Dropdowns Not Populated","text":"<p>Problem: Tag/device dropdowns are empty</p> <p>Solution: Ensure you have devices and tags configured in FUXA. The dropdowns populate from your FUXA project data.</p>"},{"location":"HowTo-Node-Red/#events-not-working","title":"Events Not Working","text":"<p>Problem: Emitted events not triggering expected behavior</p> <p>Solution: Check that other FUXA components (scripts, views) are listening for the correct event types. Events are case-sensitive.</p>"},{"location":"HowTo-Node-Red/#email-notifications-not-sending","title":"Email Notifications Not Sending","text":"<p>Problem: send-message node not delivering emails</p> <p>Solution: Configure SMTP settings in FUXA server configuration. Check FUXA logs for SMTP connection errors.</p>"},{"location":"HowTo-ODBC/","title":"ODBC","text":"<p>To get started with ODBC it is recommended to use the Docker version as the ODBC drivers are pre installed and ready to go. </p> <p>Installing ODBC Drivers</p> <p>The available drivers that can be used and there defined name can be found here: ODBC Driver ini</p> <p>If you install via NPM on a Debian based Linux system you can try manually install ODBC drivers for your system with the following steps:</p> <p>1: <code>sudo apt-get update &amp;&amp; sudo apt-get install -y unixodbc unixodbc-dev</code> </p> <p>2: copy both files from here onto your system ODBC Driver Files</p> <p>3: Go to the directory of the downloaded files and make script executable and install and most ini file</p> <pre><code>sudo chmod +x install_odbc_drivers.sh\nsudo ./install_odbc_drivers.sh\nsudo cp odbcinst.ini /etc/odbcinst.ini\n</code></pre> <p>4: Test the installed drivers and you can connect using unixODBC change the connection string to suit your DB</p> <p><code>sudo myodbc-installer -s -a -c2 -n \"test\" -t \"DRIVER=MySQL;SERVER=YourIP;PORT=3306;DATABASE=testDB;UID=User;PWD=MyPass\"</code></p> <p><code>sudo isql test</code></p> <p>How to use ODBC</p> <p>First you need to create a connection to your DB by adding a Device in Fuxa and select ODBC</p> <p>If you are using a defined DSN you can enter that, or just add the complete connection string in the same field as seen below</p> <p></p> <p>Here are some connection strings for different DBs</p> <p><code>DRIVER=PostgreSQL;SERVER=Your_DB_IP;PORT=5432;DATABASE=testDB</code></p> <p><code>DRIVER=MySQL;SERVER=Your_DB_IP;PORT=3306;DATABASE=testDB;SSLMODE=DISABLED</code></p> <p>MySQL can cause connection issues due to SSLMODE, so please try with out SSLMODE in the connection string and try enabled and disabled. <code>SSLMODE=ENABLE</code> <code>SSLMODE=DISABLED</code></p> <p>Replace testDB with your actual DB name</p> <p>Create a Server Side Script to test, you can use the test tab and console there to display the result</p> <p>First you need to get ODBC connection via devices, in the example it's named postgreSQL as you can see in the above pic</p> <pre><code>// Initialize the device, sane name as connection\nlet myDevice = await $getDevice('postgreSQL', true);\n</code></pre> <p>Read data from the DB</p> <pre><code>let result = await myDevice.pool.query(`SELECT * FROM \"testTable\"`);\nconsole.log(JSON.stringify(result));\n</code></pre> <p>Some important notes: </p> <p>Depending on your database you may need to remove the quotes <code>\"testTable\"</code> to <code>testTable</code> or add the schema <code>\"DB_Schema\".\"testTable\"</code></p> <p>If you need to use ODBC in another script you cannot use the same connection name: </p> <p>Script 1 <code>let myDevice1 = await $getDevice('postgreSQL', true);</code></p> <p>Script 2 <code>let myDevice2 = await $getDevice('postgreSQL', true);</code></p> <p>Full Example</p> <p>This example also polls Tags every 100ms and uses a trigger to execute the SQL Query, please be carful you do not overload your system using this method, in the future the ideal solution would be creating an event listener for the tags and we can use a simple addEventListener method and no need to poll</p> <p>There is also a 1sec loop that updates values from the DB and pushes them to the Table in Fuxa UI </p> <p>There is a function called query manager and this handles the trigger and the one shot of the execution </p> <p>Note: you may have to restart Fuxa for this to work correctly and each time you modify the script, sometimes it's fine if you modify the script other times it requires a restart, so if you have any weird issues try a restart before creating an issue</p> <p>Create a Server Side Script and set it to on startup</p> <pre><code>// Query Manager, function to provide one shot based on trigger event\nasync function createQueryManager(device) {\n    let lastTriggerState = false;\n    return async function(trigger, sqlQuery) {\n        if (trigger &amp;&amp; trigger !== lastTriggerState) {\n            try {\n                const result = await device.pool.query(sqlQuery);\n                lastTriggerState = trigger;\n                return result;\n            } catch (error) {\n                return 'Error executing query';\n            }\n        }\n        lastTriggerState = trigger;\n    };\n}\n\n// Initialize the device, sane nane as connection\nlet myDevice = await $getDevice('postgreSQL', true);\n\n// Create query Manager for each query type, retains query data\nlet executeInsertQuery = await createQueryManager(myDevice); // Instance Insert\nlet executeSelectQuery = await createQueryManager(myDevice); // Instance Select\n\n// Global Variables to retain Data\nlet selResult;\n\n// 100ms loop catch Tag Events\nlet myLoop100ms = setInterval(loop100ms, 100);\n\nasync function loop100ms() {\n\n    let customerName     = $getTag($getTagId('customerName'));\n    let customerPhone    = $getTag($getTagId('customerPhone'));\n    let customerEmail    = $getTag($getTagId('customerEmail'));\n    let customerAge      = $getTag($getTagId('customerAge'));\n    let execSaveCustomer = $getTag($getTagId('execSaveCustomer'));\n\n    // Call Query Manager Instance Function Every 100ms, first parameter is the trigger to execute the query once with a one shot\n    await executeInsertQuery(\n        execSaveCustomer,\n        `INSERT INTO \"testData\".\"Customer\" (\"Name\", \"Phone\", \"Email\", \"Age\") VALUES ('${customerName}', '${customerPhone}', '${customerEmail}', ${customerAge})`\n    );\n\n    // Testing second instance calling same function type\n    //selResult = await executeSelectQuery(\n    //    execSaveCustomer,\n    //    'SELECT * FROM \"testData\".\"Customer\"'\n    //);\n    //\n    //$setTag($getTagId('customerDataArray'), JSON.stringify(selResult));\n}\n\n// 1 sec loop update data from DB\nlet myLoop1sec = setInterval(loop1sec, 1000);\n\nasync function loop1sec() {\n  // No Need to use query manager here as we are reading from DB every 1 sec to update Data for the Table\n  selResult = await myDevice.pool.query('SELECT * FROM \"testData\".\"Customer\"');\n  $setTag($getTagId('customerDataArray'), JSON.stringify(selResult));\n}\n</code></pre> <p>Create a Client Side Script with an interval of 1 sec this script will put the data into the Table </p> <pre><code>let customerData = JSON.parse($getTag($getTagId('customerDataArray'  ,)));\n\n// Column ID's must match DB column\nvar tableData = {\n  columns: [{\n    id: 'Name',\n    label: 'Name'\n    }, {\n    id: 'Phone',    \n    label: 'Phone'\n    }, {\n    id: 'Email',    \n    label: 'Email'\n    }, {\n    id: 'Age',    \n    label: 'Age'\n  }],\n  rows: customerData\n};\n\n// Name of table used in Fuxa\n$invokeObject('customerTable', 'setTableAndData', tableData);\n</code></pre>"},{"location":"HowTo-Scheduler/","title":"HowTo Scheduler","text":"<p>The Scheduler is a powerful time-based automation system in FUXA that allows you to create events that trigger at specific times based on days of the week, days of the month, and months. It provides both timer mode (on/off periods) and event mode (duration-based triggers) with full device control capabilities.</p>"},{"location":"HowTo-Scheduler/#overview","title":"Overview","text":"<p>The Scheduler enables automated control of devices and tags based on time schedules. Key features include:</p> <ul> <li>Day-of-Week Scheduling: Schedule events for specific days (Monday-Sunday)</li> <li>Month Mode: Advanced scheduling by month and day-of-month combinations</li> <li>Timer Mode: Define start and end times for on/off periods</li> <li>Event Mode: Trigger events for specific durations</li> <li>Device Actions: Execute additional actions like setting values or running scripts</li> <li>Master Control: Scheduler acts as master controller for device tags</li> </ul>"},{"location":"HowTo-Scheduler/#scheduling-modes","title":"Scheduling Modes","text":""},{"location":"HowTo-Scheduler/#day-of-week-mode","title":"Day-of-Week Mode","text":"<p>The default scheduling mode allows you to select specific days of the week for your events.</p> <ul> <li>Days: Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday</li> <li>Time Range: Define start time and end time for timer mode, or start time and duration for event mode</li> <li>Visual Indicators: Selected days are highlighted in the schedule display</li> </ul>"},{"location":"HowTo-Scheduler/#month-mode","title":"Month Mode","text":"<p>Advanced scheduling that combines month and day-of-month selections for precise control.</p> <ul> <li>Months: January through December</li> <li>Days of Month: 1st through 31st</li> <li>Important Notes:</li> <li>If a month has fewer than 31 days (e.g., February with 28 days), events scheduled for the 31st will not execute</li> <li>Node.js scheduler does not support \"last day of month\" functionality</li> <li>Events only trigger on valid date combinations</li> </ul>"},{"location":"HowTo-Scheduler/#device-and-tag-relationship","title":"Device and Tag Relationship","text":""},{"location":"HowTo-Scheduler/#device-binding","title":"Device Binding","text":"<p>Each schedule is bound to a specific device and controls its associated tag:</p> <ul> <li>Device Selection: Choose from available devices in your project</li> <li>Tag Control: Scheduler directly controls the device's primary tag</li> <li>Master Authority: Scheduler always takes precedence over manual tag changes</li> </ul>"},{"location":"HowTo-Scheduler/#device-actions","title":"Device Actions","text":"<p>In addition to controlling the primary device tag, you can configure additional actions:</p> <ul> <li>Set Value: Set other device tags to specific values</li> <li>Run Script: Execute custom JavaScript functions</li> <li>Trigger Points: Actions execute on both start and end events</li> </ul> <p>Device actions are configured in the scheduler properties and provide extended automation capabilities beyond basic on/off control.</p>"},{"location":"HowTo-Scheduler/#authorization","title":"Authorization","text":"<p>The Scheduler implements a two-tier authorization system:</p>"},{"location":"HowTo-Scheduler/#master-authorization","title":"Master Authorization","text":"<ul> <li>Automatic Assignment: Scheduled devices automatically receive master authorization level</li> <li>Minimum Requirement: Users must have at least master authorization to interact with scheduled devices</li> <li>Override Capability: Master auth allows the scheduler to override manual tag changes during active events</li> </ul>"},{"location":"HowTo-Scheduler/#per-device-authorization","title":"Per-Device Authorization","text":"<ul> <li>Additional Security: Individual devices can have higher authorization levels beyond the master requirement</li> <li>Granular Control: Different devices can require different permission levels (e.g., critical equipment may need admin access)</li> <li>Layered Security: Master auth provides base access, while per-device auth adds device-specific restrictions</li> </ul>"},{"location":"HowTo-Scheduler/#addedit-schedule-form","title":"Add/Edit Schedule Form","text":""},{"location":"HowTo-Scheduler/#basic-settings","title":"Basic Settings","text":"<ul> <li>Device: Select the target device to control</li> <li>Start Time: When the event should begin (HH:MM format)</li> <li>Mode Toggle: Switch between Timer Mode and Event Mode</li> </ul>"},{"location":"HowTo-Scheduler/#timer-mode-vs-event-mode","title":"Timer Mode vs Event Mode","text":""},{"location":"HowTo-Scheduler/#timer-mode","title":"Timer Mode","text":"<ul> <li>End Time: Define when the event should stop</li> <li>Tag Behavior: Tag remains ON from start time to end time</li> <li>Use Case: Regular on/off periods (e.g., 8:00 AM to 6:00 PM)</li> </ul>"},{"location":"HowTo-Scheduler/#event-mode","title":"Event Mode","text":"<ul> <li>Duration: Set how long the event should last</li> <li>Duration Units: Hours, minutes, seconds</li> <li>Tag Behavior: Tag goes ON for the specified duration, then automatically OFF</li> <li>Use Case: Timed triggers (e.g., run pump for 30 seconds)</li> </ul>"},{"location":"HowTo-Scheduler/#recurring-vs-one-time-events","title":"Recurring vs One-Time Events","text":"<ul> <li>Recurring: Event repeats according to schedule (default)</li> <li>One-Time: Event executes once and is automatically removed</li> <li>Auto-Cleanup: Non-recurring events are deleted after completion</li> </ul>"},{"location":"HowTo-Scheduler/#month-mode-configuration","title":"Month Mode Configuration","text":"<p>When Month Mode is enabled:</p> <ul> <li>Month Selection: Choose which months the event should run</li> <li>Day-of-Month Selection: Select specific dates within those months</li> <li>Calendar View: Click the calendar button to see a visual representation of your schedule</li> </ul>"},{"location":"HowTo-Scheduler/#data-storage","title":"Data Storage","text":""},{"location":"HowTo-Scheduler/#database-structure","title":"Database Structure","text":"<p>Schedules are stored in the project database with the following structure:</p> <pre><code>{\n  \"schedules\": {\n    \"Device Name\": [\n      {\n        \"id\": \"unique_schedule_id\",\n        \"startTime\": \"08:00\",\n        \"endTime\": \"18:00\",\n        \"days\": [false, true, true, true, true, true, false],\n        \"months\": [false, false, false, false, false, false, false, false, false, true, false, false],\n        \"daysOfMonth\": [false, false, false, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false],\n        \"monthMode\": true,\n        \"recurring\": true,\n        \"eventMode\": false,\n        \"duration\": 0,\n        \"deviceName\": \"Device Name\",\n        \"variableId\": \"tag_id\"\n      }\n    ]\n  },\n  \"settings\": {\n    \"deviceActions\": [...]\n  }\n}\n</code></pre>"},{"location":"HowTo-Scheduler/#key-fields","title":"Key Fields","text":"<ul> <li>days: Boolean array for Monday-Sunday (7 elements)</li> <li>months: Boolean array for January-December (12 elements)</li> <li>daysOfMonth: Boolean array for 1st-31st (31 elements)</li> <li>monthMode: Enables month-based scheduling when true</li> <li>eventMode: Enables duration-based events when true</li> <li>recurring: Controls whether event repeats or executes once</li> </ul>"},{"location":"HowTo-Scheduler/#usage-examples","title":"Usage Examples","text":""},{"location":"HowTo-Scheduler/#daily-pump-schedule","title":"Daily Pump Schedule","text":"<ul> <li>Device: Water Pump</li> <li>Days: Monday-Friday</li> <li>Start: 08:00, End: 18:00</li> <li>Mode: Timer Mode</li> <li>Result: Pump runs during business hours on weekdays</li> </ul>"},{"location":"HowTo-Scheduler/#monthly-maintenance","title":"Monthly Maintenance","text":"<ul> <li>Device: Maintenance Valve</li> <li>Months: January, April, July, October</li> <li>Days: 15th of each month</li> <li>Start: 09:00, Duration: 2 hours</li> <li>Mode: Event Mode, Non-recurring</li> <li>Result: Valve opens for maintenance on quarterly schedule</li> </ul>"},{"location":"HowTo-Scheduler/#holiday-lighting","title":"Holiday Lighting","text":"<ul> <li>Device: Holiday Lights</li> <li>Months: December</li> <li>Days: 1st through 31st</li> <li>Start: 17:00, End: 23:00</li> <li>Mode: Timer Mode</li> <li>Result: Lights run every evening in December</li> </ul>"},{"location":"HowTo-Scheduler/#best-practices","title":"Best Practices","text":"<ol> <li>Test Schedules: Always test new schedules during development</li> <li>Month Limitations: Avoid scheduling for invalid date combinations</li> <li>Device Actions: Use device actions for complex automation logic</li> <li>Time Zones: Be aware of server time zone for scheduling</li> <li>Resource Management: Non-recurring events auto-cleanup to prevent accumulation</li> </ol>"},{"location":"HowTo-Scheduler/#troubleshooting","title":"Troubleshooting","text":""},{"location":"HowTo-Scheduler/#common-issues","title":"Common Issues","text":"<ul> <li>Event Not Triggering: Check month/day combinations for validity</li> <li>Tag Not Changing: Verify device connection and permissions</li> <li>Actions Not Executing: Check device action configuration</li> <li>Schedule Not Saving: Ensure proper permissions and database access</li> </ul>"},{"location":"HowTo-Scheduler/#debug-information","title":"Debug Information","text":"<p>Scheduler logs include detailed information about: - Schedule loading and parsing - Event triggering with timestamps - Tag write operations - Device action execution - Month mode date validation</p>"},{"location":"HowTo-UI-Layout/","title":"UI Layout","text":"<p>To define the Layout of end user going to Layout settings in editor.</p> <p></p> <p>In General tab you can define: - Start View, the first View (home) show by going to http://localhost:1881. - Zoom, if enabled you can Zoom the View with the Mouse Scroll Wheel and move the View with the Mouse Left Button. - Dialog Mode of input field, if enabled will be show a dialog by Input value control.     - </p> <ul> <li>Show Navigation, setting to Show and Hide the Header bar and the navigation Menu</li> <li>Hide the development button to switch between Edit and Home.</li> </ul> <p></p> <p>In Navigation Side Menu tab you can define the Menu items and diifferent style attributes.</p> <p></p> <p>In Header Navigation Bar tab you can define if and how to show the Alarms notification items, and diifferent style attributes.</p> <p></p>"},{"location":"HowTo-View/","title":"HowTo View","text":"<p>To create a View going in editor. Click on the \"+\" icon in the top left corner. Select \"Canvas/SVG\". </p> <p>Click to \"Property\". </p> <p>Define the View size and background. </p>"},{"location":"HowTo-WebSockets/","title":"WebSockets","text":"<p>WebSocket is a great simple way to communicate with other web applications such as Node-Red. We can use WebSocket directly in Fuxa Scripts.</p> <p>Here is an example of bidirectional data transfer, we wrap all Fuxa tags and values into a JSON Data object with a Timestamp and Payload. We use a for loop to grab all the tag values and insert into the Payload and we also use a for loop to write tags values received from the WebSocket.</p> <p>The Script has to be a Server side script and set for on Startup. You have to have a already running WebSocket Server as the below code is for WebSocket Client. </p> <p>It is possible to also create a WebSocket Server in the Fuxa Script if needed. The below code only covers client connection to a server. </p> <pre><code>const WebSocket = require('/usr/src/app/FUXA/server/node_modules/ws');\nlet ws;  // Declare ws Web Socket globally to manage the connection\n\nconst WebSocketUrl = 'ws://127.0.0.1:1880'; // Url to WebSocket Server\n\n// List of PLC/FUXA Tags\nconst tagNames = [\n    'yourTagName1', \n    'yourTagName2', \n    'yourTagName3', \n    'yourTagName4', \n    'yourTagName5'\n];\n\n// Function to get tag values and create the JSON payload\nasync function createPayload() {\n    let payload = {};\n\n    for (const tagName of tagNames) {\n        let tag = await $getTag($getTagId(tagName));\n        payload[tagName] = tag;\n    }\n\n    return {\n        data: {\n            timestamp: new Date().toISOString(),\n            payload: payload\n        }\n    };\n}\n\n// Function to send data to WebSocket server\nfunction sendData() {\n    createPayload().then((payload) =&gt; {\n        if (ws &amp;&amp; ws.readyState === WebSocket.OPEN) {\n            ws.send(JSON.stringify(payload));\n        } else {\n            //console.log('WebSocket is not open. Skipping sending data.');\n        }\n    });\n}\n\n// Open WebSocket connection\nfunction openWebSocketConnection() {\n    ws = new WebSocket(WebSocketUrl);\n\n    ws.on('open', () =&gt; {\n        console.log('WebSocket connection established');\n    });\n\n    ws.on('message', (message) =&gt; {\n        try {\n            let receivedData = JSON.parse(message);\n            if (receivedData.data &amp;&amp; receivedData.data.payload) {\n                for (const tagName in receivedData.data.payload) {\n                    if (tagNames.includes(tagName)) {\n                        $setTag($getTagId(tagName), receivedData.data.payload[tagName]);\n                    }\n                }\n            }\n        } catch (error) {\n            console.error('Error parsing message from WebSocket server:', error);\n        }\n    });\n\n    ws.on('error', (error) =&gt; {\n        console.error('WebSocket error:', error);\n    });\n\n    ws.on('close', () =&gt; {\n        console.log('WebSocket connection closed');\n        // Attempt to reconnect after a delay if the connection is closed\n        setTimeout(openWebSocketConnection, 5000); \n    });\n}\n\n// Start the WebSocket connection\nopenWebSocketConnection();\n\n// Set interval to send data every 500ms\nif (typeof globalThis.myTimer === 'undefined') globalThis.myTimer = null;\n\nif (!globalThis.myTimer) globalThis.myTimer = setInterval(myTimerFunction, 500);\n\nasync function myTimerFunction() {\n  sendData();\n}\n</code></pre>"},{"location":"HowTo-Widgets/","title":"Widgets","text":"<p>Fuxa Widgets</p> <p>Fuxa widgets use pure SVGs with Javascript by the use of script tags</p> <pre><code>&lt;svg&gt;\n  SVG Content Here\n  &lt;script&gt;\n     JS Script Content Here\n  &lt;/script&gt;\n&lt;/svg&gt;\n</code></pre> <p>We can transfer data between the SVG script using some simple functions and declaring the variables as global</p> <pre><code>_pb_ = bool   parameter ( true or false )\n_pn_ = number parameter ( Int, Float, Real etc )\n_ps_ = string parameter ( string can be entered directly )\n_pc_ = color parameter in hex color code ( #00ff00ff )\n</code></pre> <p>It's also very important that the variables are contained within these comments <code>//!export-start</code> and <code>//!export-end</code></p> <pre><code>//!export-start\nlet _pn_value = 50;\n//!export-end\n</code></pre> <p>The variables will now be available in Fuxa in the SVG properties panel where you can bind Fuxa Tags</p> <p>In order to transfer data between the Widget/SVG we have 2x functions we need to use:</p> <p>To send values to Fuxa from the SVG</p> <pre><code>function postValue(id, value) {\n  console.error('Not defined!');\n}\n</code></pre> <p>You need to call the function, the ID needs to match the exact variable name</p> <pre><code>postValue('_pn_value', someNewValue);\n</code></pre> <p>To receive values from Fuxa to the SVG</p> <pre><code>function putValue(id, value) {\n  if (id === '_pn_value') {\n    callFunction(value);\n    newVar = value;\n  }\n}\n</code></pre> <p>Here we wait for the function to be called in Fuxa and check for the ID we are after which is the exact variable name defined</p> <p>If you use <code>setInterval</code> you also need to clear the interval when you change page or enter the editor, if you do not do this the widget will become broken due to another <code>setInterval</code> being called. In our examples we check the object if it exist and use the MutationObserver</p> <pre><code>const checkDestroy = document.getElementById('svgIdName'); // Important must be name of the SVG!\nif (!checkDestroy) {\n  clearBlinking(); \n  return;\n}\n</code></pre> <p>And the Mutation Observer </p> <pre><code>// Set up the MutationObserver to watch for removal of the SVG element\nconst observer = new MutationObserver((mutations) =&gt; {\n  mutations.forEach((mutation) =&gt; {\n    mutation.removedNodes.forEach((node) =&gt; {\n      if (node.id === 'svgIdName') { // Important must be name of the SVG!\n        clearBlinking(); \n        observer.disconnect(); \n      }\n    });\n  });\n});\n// Start observing the body or a parent element of the SVG\nobserver.observe(document.body, { childList: true, subtree: true }); \n</code></pre> <p>It's important you use the SVG Id <code>&lt;svg id=svgIdName&gt;</code> at the top of the SVG file</p> <p>You can also use CSS in the SVG and full JS and access the elements/ids using standard <code>getElementById</code> and <code>addEventListener</code></p> <p>For full working examples, see the examples in the widget section https://github.com/frangoteam/FUXA/tree/master/server/_widgets </p>"},{"location":"HowTo-animate-Pipe/","title":"Animate Pipe","text":"<p>First you design your pipe form and then you define the action by bind the Device-Tag (Variable) with the animation. </p>"},{"location":"HowTo-bind-Controls/","title":"Bind Controls","text":"<p>To bind a Output Control to the Device Tag (Variable): going in editor and select the View. </p> <p>To bind a Input Control to Device Tag. </p> <p>To bind a Select Control to Device Tag. </p> <p>To bind a Slider Control to Device Tag. </p>"},{"location":"HowTo-bind-Shapes/","title":"HowTo bind Shapes","text":"<p>To bind Shapes to the Device Tag (Variable): going in editor and select the View. </p> <p>To bind Process Engineering Shapes (Tank) to Device Tag. </p>"},{"location":"HowTo-configure-Script/","title":"Configure Script","text":"<p>To configure scripts going to Scripts in editor.</p> <p></p> <p>Add a new script (a script is a javascript function), configure the function name and parameters, there are 2 type of parameters:  - Tag ID  - Value, number or string</p> <p>Then you write your logic into the function. There are system call that you can use:  - $setTag, to set value of Tag  - $getTag, to get current Tag value</p> <p></p> <p>You can test the script, to verify it makes sense to use the console.log method.</p> <p></p> <p>From the GUI you can configure in Events the call of script.</p> <p></p> <p>If you use intervals in a script it's important you handle them correctly. For example if you have setInterval in a script and run the test multiple times this will create a new interval each time calling the same piece of code and you will have to restart Fuxa to clear it. One method to handle this is assign an ID to the interval and do a simple check if it exist. </p> <pre><code>if (typeof globalThis.myTimer === 'undefined') globalThis.myTimer = null;\n\nif (!globalThis.myTimer) globalThis.myTimer = setInterval(myTimerFunction, 1000);\n\nasync function myTimerFunction() {\n  //myTimer code here every 1 sec\n}\n</code></pre>"},{"location":"HowTo-configure-events/","title":"Configure Events","text":"<p>In the Shapes and button control you can configure the mouse Events click, mouseDown, mouseUp to execute tasks.</p> <ul> <li>Open Page</li> <li>Open Card</li> <li>Open Dialog</li> <li>Open iframe</li> <li>Open Window</li> <li>Set Value</li> <li>Toggle Value</li> <li>Set from Input and Close</li> </ul>"},{"location":"HowTo-configure-events/#open-page","title":"Open Page","text":"<p>Used to display a View in Main window.</p> <p></p>"},{"location":"HowTo-configure-events/#open-card","title":"Open Card","text":"<p>Used to display a View as Popup window. The Card will be displayed next to the mouse at the time of the event, several cards can be displayed at the same time. The same Card can be used for example to show values of more pumps.</p> <p></p>"},{"location":"HowTo-configure-events/#open-dialog","title":"Open Dialog","text":"<p>Used to display a View as Dialog, typically to configure values. The Dialog will be displayed on top of the screen. The same Dialog can be used for example to configure values of more pumps.</p> <p></p>"},{"location":"HowTo-configure-events/#open-iframe","title":"Open iframe","text":"<p>Used to open a window as iframe (embedded HTML document from external sources). You can define the window size and the zoom scala.</p> <p></p>"},{"location":"HowTo-configure-events/#open-window","title":"Open Window","text":"<p>Used to open a window in a new browser. You can define the window size.</p> <p></p>"},{"location":"HowTo-configure-events/#set-value","title":"Set Value","text":"<p>Used to set Tags value or increase and decrease current value.</p> <p></p>"},{"location":"HowTo-configure-events/#toggle-value","title":"Toggle Value","text":"<p>Used to toggle the Tags value 1/0 (if 1 set to 0, if 0 set to 1).</p> <p></p>"},{"location":"HowTo-configure-events/#set-from-input-and-close","title":"Set from Input and Close","text":"<p>Combined can be used to set some values through a dialog with a OK confirmation </p> <p></p>"},{"location":"HowTo-define-Shapes/","title":"Define Shapes","text":"<p>The shapes folder are located in: \u2018client/dist/assets/lib/svgeditor/shapes\u2019 (or \u2018client/src/lib/svgeditor/shapes\u2019 if you are debugging), you can add a new shape by creating a new javascript file (best copying it from \u2018my-shapes.js\u2019) or editing an existing file.</p> <p>In the javascript file you can change the following content:</p> <pre><code>var shapesGroupName = 'Shapes'; // used to organize and gropping the shapes, displayed in editor menu as label with expand/collapse\n\nvar typeId = 'shapes';  // used to identify shapes type, 'shapes' is binded with angular component 'ShapesComponent'\n                        // if you make a new type you have to implement the angular component too\n\n</code></pre> <p>in this array your shapes data, the shape object has the following attributes:</p> <pre><code>var shapes = [{ name: 'diamond', \n                ico: 'assets/lib/svgeditor/shapes/img/shape-diamond.svg', \n                content:[{ id: '', \n                            type: 'path', \n                            attr: { d: 'M 20 0 L 40 20 L 20 40 L 0 20 Z' }\n                        }]\n        },...]\n\n// 'name': is unique for shape type\n// 'ico': path icon displayed in editor menu\n// 'content': array of svg element\n// 'id': element id used if you like make an animation managed in angular component\n// 'type': svg element type (path, text, ellipse,...) see svg description\n// 'attr': element attribute, depending of type\n\n</code></pre> <p>To design my shapes I used the Inkscape application. You can see with XML Editor the elements and nodes attribute to add in 'type' and 'attr'.</p> <p>!You have to leave the rest of file content</p> <p>If you have created a new javascript shapes file, you have to add to loader too,  then add to \u2018shapesLoader.js\u2019 your file name that will be loaded dynamically (don\u2019t remove \u2018shapesLoader.js\u2019)</p> <pre><code>var shapesToLoad = ['my-shapes.js', 'your shape file name.js'];\n\n</code></pre> <p>If you have created a new shapes type, for example to define your own animations, you have to implement the correspondent angular component too. It is better to looking the files content in \u2018client/src/app/gauges/shapes/\u2019</p>"},{"location":"HowTo-save-load-Project/","title":"Save/Load Project","text":""},{"location":"HowTo-save-load-Project/#create-a-project","title":"Create a project","text":"<p>You can create a new project, the current project will be overwritten with the new void project (that have only a void MainView).</p> <p></p>"},{"location":"HowTo-save-load-Project/#save-the-project","title":"Save the project","text":"<p>The project will be automatically saved in an internal database after every change of settings (dialogs confirmation) like editings 'Device', 'Tag', 'Charts',.... The Views will be automatically saved by selecting another or by leaving the editor.</p> <p>By Save Project you can force the internal saving process. By Save Project As\u2026 you can export the whole project to a file in JSON format (MyProject.json), useful for making backups of the project.</p>"},{"location":"HowTo-save-load-Project/#open-the-project","title":"Open the project","text":"<p>You can open a project from the exported file (MyProject.json).</p>"},{"location":"HowTo-setup-Alarms/","title":"Setup Alarms","text":"<p>To configure alarms going to Alarms in editor.</p> <p></p> <p>An alarm ist bind to one Tag to whitch can you define 4 types of conditions for respective levels (High High, High, Low and Message).</p> <p></p> <p>The active alarms and the history can be displayed by configuring the view from the menu or the button on the header. Layout settings.</p> <p></p> <p>It is also possible to configure several actions per alarm like show popup dialog or set a value to a tag.</p> <p></p>"},{"location":"HowTo-use-same-view/","title":"Use Same View","text":"<p>You can reuse the same View for repeating components like pumps and valves.</p> <p></p> <p>You have to define a device as internal and some variable (Tag) and bind it to the controls of reusable View. For example the title dialog and a variable for the input value.</p> <p></p> <p>Then define in every component the Events to open the dialog, where you map the internal tags to the device tags.</p> <p></p> <p>If you wish, you can also add a confirmation button.</p> <p></p>"},{"location":"HowTo-use-same-view/#extended-method-shared-detail-page-with-target-device","title":"Extended Method: Shared detail page with Target Device","text":"<p>The core purpose of this feature is to dynamically display detailed data of multiple devices of the same type through one shared page template, avoiding separate detail pages for each device.</p>"},{"location":"HowTo-use-same-view/#implementation-steps","title":"Implementation Steps","text":"<ol> <li> <p>Establish device connections and tags Create two (or more) device connections of the same type in Connections. Use exactly the same tag names under each device to keep data structure and references consistent. </p> </li> <li> <p>Create view pages Create two views:</p> </li> <li>Device List Page: displays all devices and contains the \"View Details\" buttons.</li> <li> <p>Device Detail Page: a reusable template for detailed device data. </p> </li> <li> <p>Configure navigation logic in list page buttons On each \"View Details\" button:</p> </li> <li>Target Page: set the shared Device Detail Page.</li> <li> <p>Target Device: set the specific device for that button. </p> </li> <li> <p>Bind tags in the detail page template In the detail page, bind variables using <code>@[tag_name]</code> (example: <code>@[device_name]</code>). When opened from the list page with Target Device, placeholders are resolved against the selected device tags. </p> </li> <li> <p>Chart configuration supports placeholders, so charts can be reused with the same dynamic device-binding approach. </p> </li> </ol> <p>Summary: One template page can show details for multiple devices. Clicking different device buttons opens the same detail page with the corresponding real-time data.</p> <p>Reference and images: - Discussion #2118: https://github.com/frangoteam/FUXA/discussions/2118</p>"},{"location":"HowTo-use-same-view/#binding-with-internal-adapter-proxy","title":"Binding with internal adapter proxy","text":"<p>Internal connection adapter as UI proxy You can define internal connection adapters and create tags bound to UI components independently of a specific device. Via client-side scripts, assign which real device the internal adapter should reference at runtime. Reads/writes are redirected to the selected device when tag names match.  </p> <p>Reference and images: - Pull Request #1810: https://github.com/frangoteam/FUXA/pull/1810</p>"},{"location":"Installing-and-Running/","title":"Installing and Running","text":"<p>FUXA is developed with NodeJS (backend) and Angular (frontend).</p> <p>Prebuilt Electron App (first option)</p> <p>You will need to be logged into github to access the download button for Electron Action Builds,  click on the workflow and scroll down to Artifacts and click the download icon for you system</p> <p>Electron Action Builds</p> <p></p> <p>Access with Web browser once installed non Electron Install</p> <p>Once you have finished one of the install processes you can access the Fuxa UI via default port 1881 and the web server IP address either localhost or the IP of the Host machine, first try localhost:1881 or host machine IP:1881</p> <p>Docker Compose (second option)</p> <p>Install Docker</p> <pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh ./get-docker.sh\n</code></pre> <pre><code>cd\nmkdir docker\nmkdir fuxa\ncd docker/fuxa\nsudo nano docker-compose.yml\n</code></pre> <p>Enter this into compose file:</p> <pre><code>version: '3.5'\n\nservices:\n    fuxa:\n        image: frangoteam/fuxa:latest\n        network_mode: \"host\"\n        volumes:\n            - ./fuxa_appdata:/usr/src/app/FUXA/server/_appdata\n            - ./fuxa_db:/usr/src/app/FUXA/server/_db\n            - ./fuxa_logs:/usr/src/app/FUXA/server/_logs\n        environment:\n            - TZ=America/New_York\n        restart: always\n</code></pre> <p>Note: This Compose file uses host network mode see Docker Networks for more details, host allows the docker container to be on the same networks as the host machine. Works best for direct access to PLCs/Databases etc but there are some limitations, it only works on Linux based systems, if you need to run on Windows you will need to use bridge network mode.</p> <p><code>network_mode: \"bridge\"</code></p> <p>Start Docker Compose</p> <p><code>sudo docker compose up -d</code></p> <p>Docker (third option)</p> <pre><code>docker pull frangoteam/fuxa:latest\ndocker run -d -p 1881:1881 frangoteam/fuxa:latest\n</code></pre> <p>Persistent storage of application data (project), daq (tags history), logs and resources images</p> <pre><code>docker run -d -p 1881:1881 -v fuxa_appdata:/usr/src/app/FUXA/server/_appdata -v fuxa_db:/usr/src/app/FUXA/server/_db -v fuxa_logs:/usr/src/app/FUXA/server/_logs -v fuxa_shapes:/usr/src/app/FUXA/client/assets/lib/svgeditor/shapes -v fuxa_images:/usr/src/app/FUXA/server/_images frangoteam/fuxa:latest\n</code></pre> <p>Build Custom Docker Image from Source (fourth option)</p> <p>This will build from the latest master branch ( you can edit the docker file to change the branch )</p> <pre><code>cd\nmkdir docker\nmkdir fuxa\ncd docker/fuxa\nmkdir fuxa-build\ncd fuxa-build\n</code></pre> <p><code>wget https://raw.githubusercontent.com/frangoteam/FUXA/master/Dockerfile</code></p> <p><code>sudo docker build -t fuxa-custom-image-name --no-cache .</code></p> <p>Once the build is complete, you can now use the custom image for example:</p> <pre><code>version: '3.5'\n\nservices:\n    fuxa:\n        image: fuxa-custom-image-name\n        network_mode: \"host\"\n        volumes:\n            - ./fuxa_appdata:/usr/src/app/FUXA/server/_appdata\n            - ./fuxa_db:/usr/src/app/FUXA/server/_db\n            - ./fuxa_logs:/usr/src/app/FUXA/server/_logs\n        environment:\n            - TZ=America/New_York\n        restart: always\n</code></pre> <p>Installing with Node and NPM</p> <p>You need to have installed Node Version 18.</p> <p>WARNING In linux with nodejs Version 18 the installation could be a challenge. If you don't intend communicate with Siemens PLCs via S7 (node-snap7 library) you can install from NPM @frangoteam/fuxa-min</p> <p>NPM (fifth option)</p> <p>Install from NPM</p> <pre><code>npm install -g --unsafe-perm @frangoteam/fuxa\nfuxa\n</code></pre> <p>Latest Release (fifth option)</p> <p>Download the latest release and unpack it</p> <p>WARNING In linux with nodejs Version 18 the installation could be a challenge. If you don't intend communicate with Siemens PLCs via S7 you can remove the node-snap7 library from the server/package.json</p> <pre><code>cd ./server\nnpm install\nnpm start\n</code></pre> <p>Open up a browser (better Chrome) and navigate to http://localhost:1881</p> <p>Setting up as an HMI ( Linux Only )</p> <p>This has only been tested on linux, but some of the steps may work on Windows</p> <p>We will use electron instead of a web browser, as it's not bloated and works well with Touch Screens ( can disable right click menu etc )</p> <p>The app is only accessing the already running Fuxa Web Server </p> <p><code>sudo apt-get update</code></p> <p><code>curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -</code></p> <p><code>sudo apt-get install -y nodejs</code></p> <p>Verify the installation by checking the versions of Node.js and npm:</p> <p><code>node -v</code></p> <p><code>npm -v</code></p> <p><code>sudo npm install -g electron --unsafe-perm=true --allow-root</code></p> <pre><code>cd /opt \nsudo mkdir electron\ncd electron\nsudo mkdir fuxa-electron\ncd fuxa-electron\n</code></pre> <p><code>sudo npm init -y</code></p> <p><code>sudo npm install electron --save-dev</code></p> <p><code>sudo nano main.js</code></p> <pre><code>const { app, BrowserWindow } = require('electron');\n\nfunction createWindow() {\n  const win = new BrowserWindow({\n    //width: 800,\n    //height: 600,\n    fullscreen: true, // Enable full-screen mode\n    webPreferences: {\n      nodeIntegration: false,\n      contextIsolation: true,\n    }\n  });\n\n  win.loadURL('http://localhost:1881'); // Replace with your web server URL\n}\n\napp.whenReady().then(createWindow);\n</code></pre> <p><code>sudo nano package.json</code></p> <pre><code>{\n  \"name\": \"fuxa-electron\",\n  \"version\": \"1.0.0\",\n  \"main\": \"main.js\",\n  \"scripts\": {\n    \"start\": \"electron .\"\n  },\n  \"description\": \"\",\n  \"devDependencies\": {\n    \"electron\": \"^31.3.1\"\n  }\n}\n</code></pre> <p>Start the app from within the directory to test</p> <p><code>npm start</code></p> <p>Setup auto startup using a system service and a script</p> <p><code>sudo nano /opt/fuxa-electron-startup.sh</code></p> <pre><code>#!/bin/bash\ncd /opt/electron/fuxa-electron\nnpm start\n</code></pre> <p><code>sudo chmod +x /opt/fuxa-electron-startup.sh</code></p> <p><code>systemctl edit --user --force --full fuxa-electron-startup.service</code></p> <pre><code>[Unit]\nDescription=Start Fuxa Electron Script\nAfter=default.target\n[Service]\nExecStart=/opt/fuxa-electron-startup.sh\n[Install]\nWantedBy=default.target\n</code></pre> <p><code>systemctl enable --user fuxa-electron-startup.service</code> </p>"},{"location":"Settings/","title":"Settings","text":"<p>Server settings are located in 'server\\_appdata\\settings.js' file. You have to restart the server after your change.</p>"},{"location":"Settings/#authentication","title":"Authentication","text":"<p>To enable and config the authentication:</p> <pre><code>secureEnabled: true,            // enable or diasable\nsecretCode: 'frangoteam751',    // secret code to encode the token\ntokenExpiresIn: '1h'            // token expiration delay '1h'=1hour, 60=60seconds, '1d'=1day\n</code></pre> <p>The default user \u2018admin\u2019 have the \u2018123456\u2019 as password, of course you can change it.</p>"},{"location":"Tips-and-Tricks/","title":"Tips and Tricks","text":"<p>Editor Keyboard Shortcuts: - Ctrl + Left / Right: rotate selected item - Ctrl + Shift + Left / Right: rotate the selected item in big step - Shift + O / P: select the prev / next item - Tab / Shift + Tab: select the prev / next item - Ctrl + Up / Down: central zoom in / out - Ctrl + Z / Y: undo / redo - Shift + 'resize with mouse the selected item': lock width and height - Shift + Up / Down / Left / Right: move the selected item - Shift + SCROLLER: zoom by mouse position - Ctrl + A: select all item - Ctrl + G: group or ungroup selected item - Ctrl + D: duplicate selected item - Shift + 'Draw line': line gradient horizonal, vertical 45\u00b0 diagonal - Ctrl + X: cut selected item - Ctrl + C / V: copy / paste selected item</p>"}]}